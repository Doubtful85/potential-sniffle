{"id":"google/cloud/datastore/readonlytransaction","name":"ReadOnlyTransaction","title":["Google","Cloud","Datastore","ReadOnlyTransaction"],"description":"<h1 id=\"readonlytransaction\">ReadOnlyTransaction</h1>\n\n<p>Represents a read-only Datastore transaction that only allows reads.</p>\n\n<p>A read-only transaction cannot modify entities; in return they do not\ncontend with other read-write or read-only transactions. Using a\nread-only transaction for transactions that only read data will\npotentially improve throughput.</p>\n\n<p>See Google::Cloud::Datastore::Dataset#transaction</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L55","resources":[{"title":"Transactions","link":"https://cloud.google.com/datastore/docs/concepts/transactions"}],"examples":[{"caption":"","code":"require \"google/cloud/datastore\"\n\ndatastore = Google::Cloud::Datastore.new\n\ntask_list_key = datastore.key \"TaskList\", \"default\"\nquery = datastore.query(\"Task\").\n  ancestor(task_list_key)\n\ntasks = nil\n\ndatastore.read_only_transaction do |tx|\n  task_list = tx.find task_list_key\n  if task_list\n    tasks = tx.run query\n  end\nend"}],"methods":[{"id":"id-instance","type":"instance","name":"id","title":["Google","Cloud","Datastore","ReadOnlyTransaction#id"],"description":"<p>Returns the value of attribute id</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L56","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"find-instance","type":"instance","name":"find","title":["Google","Cloud","Datastore","ReadOnlyTransaction#find"],"description":"<p>Retrieve an entity by providing key information. The lookup is run\nwithin the transaction.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L91","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/datastore\"\n\ndatastore = Google::Cloud::Datastore.new\n\ntask_list_key = datastore.key \"TaskList\", \"default\"\n\ndatastore.read_only_transaction do |tx|\n  task_list = tx.find task_list_key\nend"}],"params":[{"name":"key_or_kind","types":["Key","String"],"description":"A Key object or <code>kind</code> string value.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/datastore/entity\">Google::Cloud::Datastore::Entity</a>","nil"],"description":""}]},{"id":"find_all-instance","type":"instance","name":"find_all","title":["Google","Cloud","Datastore","ReadOnlyTransaction#find_all"],"description":"<p>Retrieve the entities for the provided keys. The lookup is run within\nthe transaction.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L120","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/datastore\"\n\ndatastore = Google::Cloud::Datastore.new\n\ntask_key1 = datastore.key \"Task\", 123456\ntask_key2 = datastore.key \"Task\", 987654\n\ndatastore.read_only_transaction do |tx|\n  tasks = tx.find_all task_key1, task_key2\nend"}],"params":[{"name":"keys","types":["Key"],"description":"One or more Key objects to find records for.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/datastore/dataset/lookupresults\">Google::Cloud::Datastore::Dataset::LookupResults</a>"],"description":""}]},{"id":"run-instance","type":"instance","name":"run","title":["Google","Cloud","Datastore","ReadOnlyTransaction#run"],"description":"<p>Retrieve entities specified by a Query. The query is run within the\ntransaction.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L148","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/datastore\"\n\ndatastore = Google::Cloud::Datastore.new\n\nquery = datastore.query(\"Task\").\n  where(\"done\", \"=\", false)\ndatastore.read_only_transaction do |tx|\n  tasks = tx.run query\nend"}],"params":[{"name":"query","types":["Query"],"description":"The Query object with the search criteria.","optional":false,"nullable":false},{"name":"namespace","types":["String"],"description":"The namespace the query is to run within.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/datastore/dataset/queryresults\">Google::Cloud::Datastore::Dataset::QueryResults</a>"],"description":""}]},{"id":"start-instance","type":"instance","name":"start","title":["Google","Cloud","Datastore","ReadOnlyTransaction#start"],"description":"<p>Begins a transaction.\nThis method is run when a new ReadOnlyTransaction is created.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L164","resources":[],"examples":[],"params":[],"exceptions":[{"type":"TransactionError","description":""}],"returns":[]},{"id":"commit-instance","type":"instance","name":"commit","title":["Google","Cloud","Datastore","ReadOnlyTransaction#commit"],"description":"<p>Commits the transaction.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L192","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/datastore\"\n\ndatastore = Google::Cloud::Datastore.new\n\ntask_list_key = datastore.key \"TaskList\", \"default\"\nquery = datastore.query(\"Task\").\n  ancestor(task_list_key)\n\ntx = datastore.transaction\ntask_list = tx.find task_list_key\nif task_list\n  tasks = tx.run query\nend\ntx.commit"}],"params":[],"exceptions":[],"returns":[]},{"id":"rollback-instance","type":"instance","name":"rollback","title":["Google","Cloud","Datastore","ReadOnlyTransaction#rollback"],"description":"<p>Rolls back the transaction.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L222","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/datastore\"\n\ndatastore = Google::Cloud::Datastore.new\n\ntask_list_key = datastore.key \"TaskList\", \"default\"\nquery = datastore.query(\"Task\").\n  ancestor(task_list_key)\n\ntx = datastore.transaction\ntask_list = tx.find task_list_key\nif task_list\n  tasks = tx.run query\nend\ntx.rollback"}],"params":[],"exceptions":[],"returns":[]},{"id":"reset!-instance","type":"instance","name":"reset!","title":["Google","Cloud","Datastore","ReadOnlyTransaction#reset!"],"description":"<p>Reset the transaction.\n<a data-custom-type=\"google/cloud/datastore/readonlytransaction\" data-method=\"start-instance\">ReadOnlyTransaction#start</a> must be called afterwards.</p>","source":"google-cloud-datastore/lib/google/cloud/datastore/read_only_transaction.rb#L235","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]}]}