{"id":"google/cloud/pubsub/subscription","name":"Subscription","title":["Google","Cloud","Pubsub","Subscription"],"description":"<h1 id=\"subscription\">Subscription</h1>\n\n<p>A named resource representing the stream of messages from a single,\nspecific <a data-custom-type=\"google/cloud/pubsub/topic\">Topic</a>, to be delivered to the subscribing application.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L49","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nsubscriber = sub.listen do |received_message|\n  # process message\n  received_message.acknowledge!\nend\n\n# Start background threads that will call the block passed to listen.\nsubscriber.start\n\n# Shut down the subscriber when ready to stop receiving messages.\nsubscriber.stop.wait!"}],"methods":[{"id":"name-instance","type":"instance","name":"name","title":["Google","Cloud","Pubsub","Subscription#name"],"description":"<p>The name of the subscription.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L69","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"topic-instance","type":"instance","name":"topic","title":["Google","Cloud","Pubsub","Subscription#topic"],"description":"<p>The <a data-custom-type=\"google/cloud/pubsub/topic\">Topic</a> from which this subscription receives messages.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L86","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nsub.topic.name #=> \"projects/my-project/topics/my-topic\""}],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/pubsub/topic\">Topic</a>"],"description":""}]},{"id":"deadline-instance","type":"instance","name":"deadline","title":["Google","Cloud","Pubsub","Subscription#deadline"],"description":"<p>This value is the maximum number of seconds after a subscriber\nreceives a message before the subscriber should acknowledge the\nmessage.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L95","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"deadline=-instance","type":"instance","name":"deadline=","title":["Google","Cloud","Pubsub","Subscription#deadline="],"description":"","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L100","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"retain_acked-instance","type":"instance","name":"retain_acked","title":["Google","Cloud","Pubsub","Subscription#retain_acked"],"description":"<p>Indicates whether to retain acknowledged messages. If <code>true</code>, then\nmessages are not expunged from the subscription’s backlog, even if\nthey are acknowledged, until they fall out of the\n#retention_duration window. Default is <code>false</code>.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L117","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code>true</code> if acknowledged messages are\nretained."}]},{"id":"retain_acked=-instance","type":"instance","name":"retain_acked=","title":["Google","Cloud","Pubsub","Subscription#retain_acked="],"description":"","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L122","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"retention-instance","type":"instance","name":"retention","title":["Google","Cloud","Pubsub","Subscription#retention"],"description":"<p>How long to retain unacknowledged messages in the subscription’s\nbacklog, from the moment a message is published. If\n<a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"retain_acked-instance\">#retain_acked</a> is <code>true</code>, then this also configures the retention of\nacknowledged messages, and thus configures how far back in time a\n<a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"seek-instance\">#seek</a> can be done. Cannot be more than 604,800 seconds (7 days) or\nless than 600 seconds (10 minutes). Default is 604,800 seconds (7\ndays).</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L141","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Numeric"],"description":"The message retention duration in seconds."}]},{"id":"retention=-instance","type":"instance","name":"retention=","title":["Google","Cloud","Pubsub","Subscription#retention="],"description":"","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L146","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"endpoint-instance","type":"instance","name":"endpoint","title":["Google","Cloud","Pubsub","Subscription#endpoint"],"description":"<p>Returns the URL locating the endpoint to which messages should be\npushed.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L158","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"endpoint=-instance","type":"instance","name":"endpoint=","title":["Google","Cloud","Pubsub","Subscription#endpoint="],"description":"<p>Sets the URL locating the endpoint to which messages should be pushed.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L165","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"exists?-instance","type":"instance","name":"exists?","title":["Google","Cloud","Pubsub","Subscription#exists?"],"description":"<p>Determines whether the subscription exists in the Pub/Sub service.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L188","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nsub.exists? #=> true"}],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"delete-instance","type":"instance","name":"delete","title":["Google","Cloud","Pubsub","Subscription#delete"],"description":"<p>Deletes an existing subscription.\nAll pending messages in the subscription are immediately dropped.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L230","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nsub.delete"}],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code>true</code> if the subscription was deleted."}]},{"id":"pull-instance","type":"instance","name":"pull","title":["Google","Cloud","Pubsub","Subscription#pull"],"description":"<p>Pulls messages from the server. Returns an empty list if there are no\nmessages available in the backlog. Raises an ApiError with status\n<code>UNAVAILABLE</code> if there are too many concurrent pull requests pending\nfor the given subscription.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"listen-instance\">#listen</a> for the preferred way to process messages as they\nbecome available.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L288","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nsub.pull.each { |received_message| received_message.acknowledge! }"},{"caption":"<p>A maximum number of messages returned can also be specified:</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nsub.pull(max: 10).each do |received_message|\n  received_message.acknowledge!\nend"},{"caption":"<p>The call can block until messages are available:</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nreceived_messages = sub.pull immediate: false\nreceived_messages.each do |received_message|\n  received_message.acknowledge!\nend"}],"params":[{"name":"immediate","types":["Boolean"],"description":"When <code>true</code> the system will respond\nimmediately even if it is not able to return messages. When <code>false</code>\nthe system is allowed to wait until it can return least one message.\nNo messages are returned when a request times out. The default value\nis <code>true</code>.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"listen-instance\">#listen</a> for the preferred way to process messages as they\nbecome available.","optional":true,"default":"true","nullable":false},{"name":"max","types":["Integer"],"description":"The maximum number of messages to return for this\nrequest. The Pub/Sub system may return fewer than the number\nspecified. The default value is <code>100</code>, the maximum value is <code>1000</code>.","optional":true,"default":"100","nullable":false}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/pubsub/receivedmessage\">Google::Cloud::Pubsub::ReceivedMessage</a>&gt;"],"description":""}]},{"id":"wait_for_messages-instance","type":"instance","name":"wait_for_messages","title":["Google","Cloud","Pubsub","Subscription#wait_for_messages"],"description":"<p>Pulls from the server while waiting for messages to become available.\nThis is the same as:</p>\n\n<p>subscription.pull immediate: false</p>\n\n<p>See also <a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"listen-instance\">#listen</a> for the preferred way to process messages as they\nbecome available.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L325","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nreceived_messages = sub.wait_for_messages\nreceived_messages.each do |received_message|\n  received_message.acknowledge!\nend"}],"params":[{"name":"max","types":["Integer"],"description":"The maximum number of messages to return for this\nrequest. The Pub/Sub system may return fewer than the number\nspecified. The default value is <code>100</code>, the maximum value is <code>1000</code>.","optional":true,"default":"100","nullable":false}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/pubsub/receivedmessage\">Google::Cloud::Pubsub::ReceivedMessage</a>&gt;"],"description":""}]},{"id":"listen-instance","type":"instance","name":"listen","title":["Google","Cloud","Pubsub","Subscription#listen"],"description":"<p>Create a <a data-custom-type=\"google/cloud/pubsub/subscriber\">Subscriber</a> object that receives  and processes messages\nusing the code provided in the callback.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L393","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\n\nsubscriber = sub.listen do |received_message|\n  # process message\n  received_message.acknowledge!\nend\n\n# Start background threads that will call block passed to listen.\nsubscriber.start\n\n# Shut down the subscriber when ready to stop receiving messages.\nsubscriber.stop.wait!"},{"caption":"<p>Configuring to increase concurrent callbacks:</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\n\nsubscriber = sub.listen threads: { callback: 16 } do |rec_message|\n  # store the message somewhere before acknowledging\n  store_in_backend rec_message.data # takes a few seconds\n  rec_message.acknowledge!\nend\n\n# Start background threads that will call block passed to listen.\nsubscriber.start"}],"params":[{"name":"deadline","types":["Numeric"],"description":"The default number of seconds the stream\nwill hold received messages before modifying the message’s ack\ndeadline. The minimum is 10, the maximum is 600. Default is\n<a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"deadline-instance\">#deadline</a>. Optional.","optional":true,"default":"nil","nullable":true},{"name":"streams","types":["Integer"],"description":"The number of concurrent streams to open to\npull messages from the subscription. Default is 4. Optional.","optional":true,"default":"nil","nullable":true},{"name":"inventory","types":["Integer"],"description":"The number of received messages to be\ncollected by subscriber. Default is 1,000. Optional.","optional":true,"default":"nil","nullable":true},{"name":"threads","types":["Hash"],"description":"The number of threads to create to handle\nconcurrent calls by each stream opened by the subscriber. Optional.</p>\n\n<p>Hash keys and values may include the following:</p>\n\n<ul>\n  <li><code>:callback</code> (Integer) The number of threads used to handle the\nreceived messages. Default is 8.</li>\n  <li><code>:push</code> (Integer) The number of threads to handle\nacknowledgement (<a data-custom-type=\"google/cloud/pubsub/receivedmessage\" data-method=\"ack!-instance\">ReceivedMessage#ack!</a>) and delay messages\n(<a data-custom-type=\"google/cloud/pubsub/receivedmessage\" data-method=\"nack!-instance\">ReceivedMessage#nack!</a>, <a data-custom-type=\"google/cloud/pubsub/receivedmessage\" data-method=\"delay!-instance\">ReceivedMessage#delay!</a>). Default is\n4.</li>\n</ul>","optional":true,"default":"{}","nullable":false},{"name":"yield","types":["block"],"description":"a block for processing new messages","optional":true,"nullable":false},{"name":"yield.received_message","types":["ReceivedMessage"],"description":"the newly received\nmessage","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/pubsub/subscriber\">Subscriber</a>"],"description":""}]},{"id":"acknowledge-instance","type":"instance","name":"acknowledge","title":["Google","Cloud","Pubsub","Subscription#acknowledge"],"description":"<p>Acknowledges receipt of a message. After an ack,\nthe Pub/Sub system can remove the message from the subscription.\nAcknowledging a message whose ack deadline has expired may succeed,\nalthough the message may have been sent again.\nAcknowledging a message more than once will not result in an error.\nThis is only used for messages received via pull.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/pubsub/receivedmessage\" data-method=\"acknowledge!-instance\">ReceivedMessage#acknowledge!</a>.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L425","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nreceived_messages = sub.pull\nsub.acknowledge received_messages"}],"params":[{"name":"messages","types":["ReceivedMessage","String"],"description":"One or more\n<a data-custom-type=\"google/cloud/pubsub/receivedmessage\">ReceivedMessage</a> objects or ack_id values.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"delay-instance","type":"instance","name":"delay","title":["Google","Cloud","Pubsub","Subscription#delay"],"description":"<p>Modifies the acknowledge deadline for messages.</p>\n\n<p>This indicates that more time is needed to process the messages, or to\nmake the messages available for redelivery if the processing was\ninterrupted.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/pubsub/receivedmessage\" data-method=\"delay!-instance\">ReceivedMessage#delay!</a>.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L460","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\n\nsub = pubsub.subscription \"my-topic-sub\"\nreceived_messages = sub.pull\nsub.delay 120, received_messages"}],"params":[{"name":"new_deadline","types":["Integer"],"description":"The new ack deadline in seconds from the\ntime this request is sent to the Pub/Sub system. Must be &gt;= 0. For\nexample, if the value is <code>10</code>, the new ack deadline will expire 10\nseconds after the call is made. Specifying <code>0</code> may immediately make\nthe message available for another pull request.","optional":false,"nullable":false},{"name":"messages","types":["ReceivedMessage","String"],"description":"One or more\n<a data-custom-type=\"google/cloud/pubsub/receivedmessage\">ReceivedMessage</a> objects or ack_id values.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"create_snapshot-instance","type":"instance","name":"create_snapshot","title":["Google","Cloud","Pubsub","Subscription#create_snapshot"],"description":"<p>Creates a new <a data-custom-type=\"google/cloud/pubsub/snapshot\">Snapshot</a> from the subscription. The created snapshot\nis guaranteed to retain:</p>\n\n<ul>\n  <li>The existing backlog on the subscription. More precisely, this is\ndefined as the messages in the subscription’s backlog that are\nunacknowledged upon the successful completion of the\n<code>create_snapshot</code> operation; as well as:</li>\n  <li>Any messages published to the subscription’s topic following the\nsuccessful completion of the <code>create_snapshot</code> operation.</li>\n</ul>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L508","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-sub\"\n\nsnapshot = sub.create_snapshot \"my-snapshot\"\nsnapshot.name #=> \"projects/my-project/snapshots/my-snapshot\""},{"caption":"<p>Without providing a name:</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-sub\"\n\nsnapshot = sub.create_snapshot\nsnapshot.name #=> \"projects/my-project/snapshots/gcr-analysis-...\""}],"params":[{"name":"snapshot_name","types":["String","nil"],"description":"Name of the new snapshot. If the\nname is not provided, the server will assign a random name\nfor this snapshot on the same project as the subscription. The\nformat is <code>projects/{project}/snapshots/{snap}</code>. The name must start\nwith a letter, and contain only letters ([A-Za-z]), numbers\n([0-9], dashes (-), underscores (_), periods (.), tildes (~), plus\n(+) or percent signs (%). It must be between 3 and 255 characters in\nlength, and it must not start with “goog”. Optional.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/pubsub/snapshot\">Google::Cloud::Pubsub::Snapshot</a>"],"description":""}]},{"id":"seek-instance","type":"instance","name":"seek","title":["Google","Cloud","Pubsub","Subscription#seek"],"description":"<p>Resets the subscription’s backlog to a given <a data-custom-type=\"google/cloud/pubsub/snapshot\">Snapshot</a> or to a point\nin time, whichever is provided in the request.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L561","resources":[],"examples":[{"caption":"<p>Using a snapshot</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-sub\"\n\nsnapshot = sub.create_snapshot\n\nreceived_messages = sub.pull\nsub.acknowledge received_messages\n\nsub.seek snapshot"},{"caption":"<p>Using a time:</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-sub\"\n\ntime = Time.now\n\nreceived_messages = sub.pull\nsub.acknowledge received_messages\n\nsub.seek time"}],"params":[{"name":"snapshot","types":["Snapshot","String","Time"],"description":"The <code>Snapshot</code> instance,\nsnapshot name, or time to which to perform the seek.\nIf the argument is a snapshot, the snapshot’s topic must be the\nsame as that of the subscription. If it is a time, messages retained\nin the subscription that were published before this time are marked\nas acknowledged, and messages retained in the subscription that were\npublished after this time are marked as unacknowledged. Note that\nthis operation affects only those messages retained in the\nsubscription. For example, if the time corresponds to a point before\nthe message retention window (or to a point before the system’s\nnotion of the subscription creation time), only retained messages\nwill be marked as unacknowledged, and already-expunged messages will\nnot be restored.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code>true</code> if the seek was successful."}]},{"id":"policy-instance","type":"instance","name":"policy","title":["Google","Cloud","Pubsub","Subscription#policy"],"description":"<p>Gets the <a href=\"https://cloud.google.com/iam/\">Cloud IAM</a> access control\npolicy for this subscription.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L601","resources":[{"title":"google.iam.v1.IAMPolicy","link":"https://cloud.google.com/pubsub/docs/reference/rpc/google.iam.v1#iampolicy"}],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-subscription\"\n\npolicy = sub.policy"},{"caption":"<p>Update the policy by passing a block:</p>","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-subscription\"\n\nsub.policy do |p|\n  p.add \"roles/owner\", \"user:owner@example.com\"\nend"}],"params":[{"name":"yield","types":["block"],"description":"A block for updating the policy. The latest policy\nwill be read from the Pub/Sub service and passed to the block. After\nthe block completes, the modified policy will be written to the\nservice.","optional":true,"nullable":false},{"name":"yield.policy","types":["Policy"],"description":"the current Cloud IAM Policy for this\nsubscription","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/pubsub/policy\">Policy</a>"],"description":"the current Cloud IAM Policy for this subscription"}]},{"id":"update_policy-instance","type":"instance","name":"update_policy","title":["Google","Cloud","Pubsub","Subscription#update_policy"],"description":"<p>Updates the <a href=\"https://cloud.google.com/iam/\">Cloud IAM</a> access control\npolicy for this subscription. The policy should be read from\n<a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"policy-instance\">#policy</a>. See <a data-custom-type=\"google/cloud/pubsub/policy\">Google::Cloud::Pubsub::Policy</a> for an explanation of\nthe policy <code>etag</code> property and how to modify policies.</p>\n\n<p>You can also update the policy by passing a block to <a data-custom-type=\"google/cloud/pubsub/subscription\" data-method=\"policy-instance\">#policy</a>, which\nwill call this method internally after the block completes.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L639","resources":[{"title":"google.iam.v1.IAMPolicy","link":"https://cloud.google.com/pubsub/docs/reference/rpc/google.iam.v1#iampolicy"}],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-subscription\"\n\npolicy = sub.policy # API call\n\npolicy.add \"roles/owner\", \"user:owner@example.com\"\n\nsub.update_policy policy # API call"}],"params":[{"name":"new_policy","types":["Policy"],"description":"a new or modified Cloud IAM Policy for this\nsubscription","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/pubsub/policy\">Policy</a>"],"description":"the policy returned by the API update operation"}]},{"id":"test_permissions-instance","type":"instance","name":"test_permissions","title":["Google","Cloud","Pubsub","Subscription#test_permissions"],"description":"<p>Tests the specified permissions against the <a href=\"https://cloud.google.com/iam/\">Cloud\nIAM</a> access control policy.</p>","source":"google-cloud-pubsub/lib/google/cloud/pubsub/subscription.rb#L678","resources":[{"title":"Managing\nPolicies","link":"https://cloud.google.com/iam/docs/managing-policies"}],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\n\npubsub = Google::Cloud::Pubsub.new\nsub = pubsub.subscription \"my-subscription\"\nperms = sub.test_permissions \"pubsub.subscriptions.get\",\n                             \"pubsub.subscriptions.consume\"\nperms.include? \"pubsub.subscriptions.get\" #=> true\nperms.include? \"pubsub.subscriptions.consume\" #=> false"}],"params":[{"name":"permissions","types":["String","Array<String>"],"description":"The set of permissions to\ncheck access for. Permissions with wildcards (such as <code>*</code> or\n<code>storage.*</code>) are not allowed.</p>\n\n<p>The permissions that can be checked on a subscription are:</p>\n\n<ul>\n  <li>pubsub.subscriptions.consume</li>\n  <li>pubsub.subscriptions.get</li>\n  <li>pubsub.subscriptions.delete</li>\n  <li>pubsub.subscriptions.update</li>\n  <li>pubsub.subscriptions.getIamPolicy</li>\n  <li>pubsub.subscriptions.setIamPolicy</li>\n</ul>","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Array&lt;String&gt;"],"description":"The permissions that have access."}]}]}