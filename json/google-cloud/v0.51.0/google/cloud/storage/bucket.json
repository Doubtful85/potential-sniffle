{"id":"google/cloud/storage/bucket","name":"Bucket","title":["Google","Cloud","Storage","Bucket"],"description":"<h1 id=\"bucket\">Bucket</h1>\n\n<p>Represents a Storage bucket. Belongs to a Project and has many Files.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L41","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\nfile = bucket.file \"path/to/my-file.ext\""}],"methods":[{"id":"user_project-instance","type":"instance","name":"user_project","title":["Google","Cloud","Storage","Bucket#user_project"],"description":"<p>A boolean value or a project ID string to indicate the project to\nbe billed for operations on the bucket and its files. If this\nattribute is set to <code>true</code>, transit costs for operations on the bucket\nwill be billed to the current project for this client. (See\n<a data-custom-type=\"google/cloud/storage/project\" data-method=\"project-instance\">Project#project</a> for the ID of the current project.) If this\nattribute is set to a project ID, and that project is authorized for\nthe currently authenticated service account, transit costs will be\nbilled to that project. This attribute is required with requester\npays-enabled buckets. The default is <code>nil</code>.</p>\n\n<p>In general, this attribute should be set when first retrieving the\nbucket by providing the <code>user_project</code> option to <a data-custom-type=\"google/cloud/storage/project\" data-method=\"bucket-instance\">Project#bucket</a>.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays=-instance\">#requester_pays=</a> and <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays-instance\">#requester_pays</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L76","resources":[],"examples":[{"caption":"<p>Setting a non-default project:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"other-project-bucket\", user_project: true\nfiles = bucket.files # Billed to current project\nbucket.user_project = \"my-other-project\"\nfiles = bucket.files # Billed to \"my-other-project\""}],"params":[],"exceptions":[],"returns":[]},{"id":"user_project=-instance","type":"instance","name":"user_project=","title":["Google","Cloud","Storage","Bucket#user_project="],"description":"<p>A boolean value or a project ID string to indicate the project to\nbe billed for operations on the bucket and its files. If this\nattribute is set to <code>true</code>, transit costs for operations on the bucket\nwill be billed to the current project for this client. (See\n<a data-custom-type=\"google/cloud/storage/project\" data-method=\"project-instance\">Project#project</a> for the ID of the current project.) If this\nattribute is set to a project ID, and that project is authorized for\nthe currently authenticated service account, transit costs will be\nbilled to that project. This attribute is required with requester\npays-enabled buckets. The default is <code>nil</code>.</p>\n\n<p>In general, this attribute should be set when first retrieving the\nbucket by providing the <code>user_project</code> option to <a data-custom-type=\"google/cloud/storage/project\" data-method=\"bucket-instance\">Project#bucket</a>.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays=-instance\">#requester_pays=</a> and <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays-instance\">#requester_pays</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L76","resources":[],"examples":[{"caption":"<p>Setting a non-default project:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"other-project-bucket\", user_project: true\nfiles = bucket.files # Billed to current project\nbucket.user_project = \"my-other-project\"\nfiles = bucket.files # Billed to \"my-other-project\""}],"params":[],"exceptions":[],"returns":[]},{"id":"kind-instance","type":"instance","name":"kind","title":["Google","Cloud","Storage","Bucket#kind"],"description":"<p>The kind of item this is.\nFor buckets, this is always <code>storage#bucket</code>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L89","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"id-instance","type":"instance","name":"id","title":["Google","Cloud","Storage","Bucket#id"],"description":"<p>The ID of the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L95","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"name-instance","type":"instance","name":"name","title":["Google","Cloud","Storage","Bucket#name"],"description":"<p>The name of the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L101","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"api_url-instance","type":"instance","name":"api_url","title":["Google","Cloud","Storage","Bucket#api_url"],"description":"<p>A URL that can be used to access the bucket using the REST API.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L107","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"created_at-instance","type":"instance","name":"created_at","title":["Google","Cloud","Storage","Bucket#created_at"],"description":"<p>Creation time of the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L113","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"cors-instance","type":"instance","name":"cors","title":["Google","Cloud","Storage","Bucket#cors"],"description":"<p>Returns the current CORS configuration for a static website served\nfrom the bucket.</p>\n\n<p>The return value is a frozen (unmodifiable) array of hashes containing\nthe attributes specified for the Bucket resource field\n<a href=\"https://cloud.google.com/storage/docs/json_api/v1/buckets#cors\">cors</a>.</p>\n\n<p>This method also accepts a block for updating the bucket’s CORS rules.\nSee <a data-custom-type=\"google/cloud/storage/bucket/cors\">Bucket::Cors</a> for details.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L162","resources":[{"title":"Cross-Origin\nResource Sharing (CORS)","link":"https://cloud.google.com/storage/docs/cross-origin"}],"examples":[{"caption":"<p>Retrieving the bucket’s CORS rules.</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nbucket.cors.size #=> 2\nrule = bucket.cors.first\nrule.origin #=> [\"http://example.org\"]\nrule.methods #=> [\"GET\",\"POST\",\"DELETE\"]\nrule.headers #=> [\"X-My-Custom-Header\"]\nrule.max_age #=> 3600"},{"caption":"<p>Updating the bucket’s CORS rules inside a block.</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\nbucket = storage.bucket \"my-todo-app\"\n\nbucket.update do |b|\n  b.cors do |c|\n    c.add_rule [\"http://example.org\", \"https://example.org\"],\n               \"*\",\n               headers: [\"X-My-Custom-Header\"],\n               max_age: 3600\n  end\nend"}],"params":[{"name":"yield","types":["block"],"description":"a block for setting CORS rules","optional":true,"nullable":false},{"name":"yield.cors","types":["Bucket::Cors"],"description":"the object accepting CORS rules","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"location-instance","type":"instance","name":"location","title":["Google","Cloud","Storage","Bucket#location"],"description":"<p>The location of the bucket.\nObject data for objects in the bucket resides in physical\nstorage within this region. Defaults to US.\nSee the developer’s guide for the authoritative list.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L181","resources":[{"title":"","link":"https://cloud.google.com/storage/docs/concepts-techniques"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"logging_bucket-instance","type":"instance","name":"logging_bucket","title":["Google","Cloud","Storage","Bucket#logging_bucket"],"description":"<p>The destination bucket name for the bucket’s logs.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L190","resources":[{"title":"Access Logs","link":"https://cloud.google.com/storage/docs/access-logs"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"logging_bucket=-instance","type":"instance","name":"logging_bucket=","title":["Google","Cloud","Storage","Bucket#logging_bucket="],"description":"<p>Updates the destination bucket for the bucket’s logs.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L201","resources":[{"title":"Access Logs","link":"https://cloud.google.com/storage/docs/access-logs"}],"examples":[],"params":[{"name":"logging_bucket","types":["String"],"description":"The bucket to hold the logging output","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"logging_prefix-instance","type":"instance","name":"logging_prefix","title":["Google","Cloud","Storage","Bucket#logging_prefix"],"description":"<p>The logging object prefix for the bucket’s logs. For more information,</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L212","resources":[{"title":"Access Logs","link":"https://cloud.google.com/storage/docs/access-logs"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"logging_prefix=-instance","type":"instance","name":"logging_prefix=","title":["Google","Cloud","Storage","Bucket#logging_prefix="],"description":"<p>Updates the logging object prefix. This prefix will be used to create\nlog object names for the bucket. It can be at most 900 characters and\nmust be a <a href=\"https://cloud.google.com/storage/docs/bucket-naming#objectnames\">valid object\nname</a>.\nBy default, the object prefix is the name of the bucket for which the\nlogs are enabled.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L226","resources":[{"title":"Access Logs","link":"https://cloud.google.com/storage/docs/access-logs"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"storage_class-instance","type":"instance","name":"storage_class","title":["Google","Cloud","Storage","Bucket#storage_class"],"description":"<p>The bucket’s storage class. This defines how objects in the bucket are\nstored and determines the SLA and the cost of storage. Values include\n<code>MULTI_REGIONAL</code>, <code>REGIONAL</code>, <code>NEARLINE</code>, <code>COLDLINE</code>, and\n<code>DURABLE_REDUCED_AVAILABILITY</code>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L237","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"storage_class=-instance","type":"instance","name":"storage_class=","title":["Google","Cloud","Storage","Bucket#storage_class="],"description":"<p>Updates the bucket’s storage class. This defines how objects in the\nbucket are stored and determines the SLA and the cost of storage.\nAccepted values include <code>:multi_regional</code>, <code>:regional</code>, <code>:nearline</code>,\nand <code>:coldline</code>, as well as the equivalent strings returned by\n<a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"storage_class-instance\">Bucket#storage_class</a>. For more information, see <a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage\nClasses</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L249","resources":[],"examples":[],"params":[{"name":"new_storage_class","types":["Symbol","String"],"description":"Storage class of the bucket.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"versioning?-instance","type":"instance","name":"versioning?","title":["Google","Cloud","Storage","Bucket#versioning?"],"description":"<p>Whether <a href=\"https://cloud.google.com/storage/docs/object-versioning\">Object\nVersioning</a>\nis enabled for the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L258","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"versioning=-instance","type":"instance","name":"versioning=","title":["Google","Cloud","Storage","Bucket#versioning="],"description":"<p>Updates whether <a href=\"https://cloud.google.com/storage/docs/object-versioning\">Object\nVersioning</a>\nis enabled for the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L269","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"website_main-instance","type":"instance","name":"website_main","title":["Google","Cloud","Storage","Bucket#website_main"],"description":"<p>The index page returned from a static website served from the bucket\nwhen a site visitor requests the top level directory.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L282","resources":[{"title":"How to Host a Static Website","link":"https://cloud.google.com/storage/docs/website-configuration#step4"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"website_main=-instance","type":"instance","name":"website_main=","title":["Google","Cloud","Storage","Bucket#website_main="],"description":"<p>Updates the index page returned from a static website served from the\nbucket when a site visitor requests the top level directory.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L293","resources":[{"title":"How to Host a Static Website","link":"https://cloud.google.com/storage/docs/website-configuration#step4"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"website_404-instance","type":"instance","name":"website_404","title":["Google","Cloud","Storage","Bucket#website_404"],"description":"<p>The page returned from a static website served from the bucket when a\nsite visitor requests a resource that does not exist.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L306","resources":[{"title":"How to Host a Static Website","link":"https://cloud.google.com/storage/docs/website-configuration#step4"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"labels-instance","type":"instance","name":"labels","title":["Google","Cloud","Storage","Bucket#labels"],"description":"<p>A hash of user-provided labels. The hash is frozen and changes are not\nallowed.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L313","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"labels=-instance","type":"instance","name":"labels=","title":["Google","Cloud","Storage","Bucket#labels="],"description":"<p>Updates the hash of user-provided labels.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L321","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"website_404=-instance","type":"instance","name":"website_404=","title":["Google","Cloud","Storage","Bucket#website_404="],"description":"<p>Updates the page returned from a static website served from the bucket\nwhen a site visitor requests a resource that does not exist.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L333","resources":[{"title":"How to Host a Static Website","link":"https://cloud.google.com/storage/docs/website-configuration#step4"}],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"requester_pays-instance","type":"instance","name":"requester_pays","title":["Google","Cloud","Storage","Bucket#requester_pays"],"description":"<p>Indicates that a client accessing the bucket or a file it contains\nmust assume the transit costs related to the access. The requester\nmust pass the <code>user_project</code> option to <a data-custom-type=\"google/cloud/storage/project\" data-method=\"bucket-instance\">Project#bucket</a> and\n<a data-custom-type=\"google/cloud/storage/project\" data-method=\"buckets-instance\">Project#buckets</a> to indicate the project to which the access costs\nshould be billed.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L349","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean","nil"],"description":"Returns <code>true</code> if requester pays is enabled for\nthe bucket."}]},{"id":"requester_pays=-instance","type":"instance","name":"requester_pays=","title":["Google","Cloud","Storage","Bucket#requester_pays="],"description":"<p>Enables requester pays for the bucket. If enabled, a client accessing\nthe bucket or a file it contains must assume the transit costs related\nto the access. The requester must pass the <code>user_project</code> option to\n<a data-custom-type=\"google/cloud/storage/project\" data-method=\"bucket-instance\">Project#bucket</a> and <a data-custom-type=\"google/cloud/storage/project\" data-method=\"buckets-instance\">Project#buckets</a> to indicate the project to\nwhich the access costs should be billed.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L375","resources":[],"examples":[{"caption":"<p>Enable requester pays for a bucket:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nbucket.requester_pays = true # API call\n# Other projects must now provide `user_project` option when calling\n# Project#bucket or Project#buckets to access this bucket."}],"params":[{"name":"new_requester_pays","types":["Boolean"],"description":"When set to <code>true</code>, requester pays\nis enabled for the bucket.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"update-instance","type":"instance","name":"update","title":["Google","Cloud","Storage","Bucket#update"],"description":"<p>Updates the bucket with changes made in the given block in a single\nPATCH request. The following attributes may be set: <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"cors-instance\">#cors</a>,\n<a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"logging_bucket=-instance\">#logging_bucket=</a>, <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"logging_prefix=-instance\">#logging_prefix=</a>, <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"versioning=-instance\">#versioning=</a>,\n<a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"website_main=-instance\">#website_main=</a>, <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"website_404=-instance\">#website_404=</a>, and <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays=-instance\">#requester_pays=</a>.</p>\n\n<p>In addition, the #cors configuration accessible in the block is\ncompletely mutable and will be included in the request. (See\n<a data-custom-type=\"google/cloud/storage/bucket/cors\">Bucket::Cors</a>)</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L422","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nbucket.update do |b|\n  b.website_main = \"index.html\"\n  b.website_404 = \"not_found.html\"\n  b.cors[0].methods = [\"GET\",\"POST\",\"DELETE\"]\n  b.cors[1].headers << \"X-Another-Custom-Header\"\nend"},{"caption":"<p>New CORS rules can also be added in a nested block:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\nbucket = storage.bucket \"my-todo-app\"\n\nbucket.update do |b|\n  b.cors do |c|\n    c.add_rule [\"http://example.org\", \"https://example.org\"],\n               \"*\",\n               headers: [\"X-My-Custom-Header\"],\n               max_age: 300\n  end\nend"}],"params":[{"name":"yield","types":["block"],"description":"a block yielding a delegate object for updating the\nfile","optional":true,"nullable":false}],"exceptions":[],"returns":[]},{"id":"delete-instance","type":"instance","name":"delete","title":["Google","Cloud","Storage","Bucket#delete"],"description":"<p>Permanently deletes the bucket.\nThe bucket must be empty before it can be deleted.</p>\n\n<p>The API call to delete the bucket may be retried under certain\nconditions. See Google::Cloud#storage to control this behavior.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L448","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\nbucket.delete"}],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code>true</code> if the bucket was deleted."}]},{"id":"files-instance","type":"instance","name":"files","title":["Google","Cloud","Storage","Bucket#files"],"description":"<p>Retrieves a list of files matching the criteria.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L501","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\nfiles = bucket.files\nfiles.each do |file|\n  puts file.name\nend"},{"caption":"<p>Retrieve all files: (See <a data-custom-type=\"google/cloud/storage/file/list\" data-method=\"all-instance\">File::List#all</a>)</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\nfiles = bucket.files\nfiles.all do |file|\n  puts file.name\nend"}],"params":[{"name":"prefix","types":["String"],"description":"Filter results to files whose names begin with\nthis prefix.","optional":true,"default":"nil","nullable":true},{"name":"delimiter","types":["String"],"description":"Returns results in a directory-like mode.\n<code>items</code> will contain only objects whose names, aside from the\n<code>prefix</code>, do not contain <code>delimiter</code>. Objects whose names, aside\nfrom the <code>prefix</code>, contain <code>delimiter</code> will have their name,\ntruncated after the <code>delimiter</code>, returned in <code>prefixes</code>. Duplicate\n<code>prefixes</code> are omitted.","optional":true,"default":"nil","nullable":true},{"name":"token","types":["String"],"description":"A previously-returned page token representing\npart of the larger set of results to view.","optional":true,"default":"nil","nullable":true},{"name":"max","types":["Integer"],"description":"Maximum number of items plus prefixes to return.\nAs duplicate prefixes are omitted, fewer total results may be\nreturned than requested. The default value of this parameter is\n1,000 items.","optional":true,"default":"nil","nullable":true},{"name":"versions","types":["Boolean"],"description":"If <code>true</code>, lists all versions of an object\nas distinct results. The default is <code>false</code>. For more information,\nsee <a href=\"https://cloud.google.com/storage/docs/object-versioning\">Object Versioning\n</a>.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>&gt;"],"description":"(See\n<a data-custom-type=\"google/cloud/storage/file/list\">Google::Cloud::Storage::File::List</a>)"}]},{"id":"file-instance","type":"instance","name":"file","title":["Google","Cloud","Storage","Bucket#file"],"description":"<p>Retrieves a file matching the path.</p>\n\n<p>If a <a href=\"https://cloud.google.com/storage/docs/encryption#customer-supplied\">customer-supplied encryption\nkey</a>\nwas used with <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"create_file-instance\">#create_file</a>, the <code>encryption_key</code> option must be\nprovided or else the file’s CRC32C checksum and MD5 hash will not be\nreturned.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L546","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nputs file.name"}],"params":[{"name":"path","types":["String"],"description":"Name (path) of the file.","optional":false,"nullable":false},{"name":"generation","types":["Integer"],"description":"When present, selects a specific revision\nof this object. Default is the latest version.","optional":true,"default":"nil","nullable":true},{"name":"skip_lookup","types":["Boolean"],"description":"Optionally create a Bucket object\nwithout verifying the bucket resource exists on the Storage service.\nCalls made on this object will raise errors if the bucket resource\ndoes not exist. Default is <code>false</code>.","optional":true,"default":"nil","nullable":true},{"name":"encryption_key","types":["String"],"description":"Optional. The customer-supplied,\nAES-256 encryption key used to encrypt the file, if one was provided\nto <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"create_file-instance\">#create_file</a>. (Not used if <code>skip_lookup</code> is also set.)","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>","nil"],"description":"Returns nil if file does\nnot exist"}]},{"id":"create_file-instance","type":"instance","name":"create_file","title":["Google","Cloud","Storage","Bucket#create_file"],"description":"<p>Creates a new <a data-custom-type=\"google/cloud/storage/file\">File</a> object by providing a path to a local file (or\nany IO or IO-ish object) to upload, along with the path at which to\nstore it in the bucket.</p>\n\n<h4 id=\"customer-supplied-encryption-keys\">Customer-supplied encryption keys</h4>\n\n<p>By default, Google Cloud Storage manages server-side encryption keys\non your behalf. However, a <a href=\"https://cloud.google.com/storage/docs/encryption#customer-supplied\">customer-supplied encryption key</a>\ncan be provided with the <code>encryption_key</code> option. If given, the same\nkey must be provided to subsequently download or copy the file. If you\nuse customer-supplied encryption keys, you must securely manage your\nkeys and ensure that they are not lost. Also, please note that file\nmetadata is not encrypted, with the exception of the CRC32C checksum\nand MD5 hash. The names of files and buckets are also not encrypted,\nand you can read or update the metadata of an encrypted file without\nproviding the encryption key.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L716","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nbucket.create_file \"path/to/local.file.ext\""},{"caption":"<p>Specifying a destination path:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nbucket.create_file \"path/to/local.file.ext\",\n                   \"destination/path/file.ext\""},{"caption":"<p>Providing a customer-supplied encryption key:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\nbucket = storage.bucket \"my-bucket\"\n\n# Key generation shown for example purposes only. Write your own.\ncipher = OpenSSL::Cipher.new \"aes-256-cfb\"\ncipher.encrypt\nkey = cipher.random_key\n\nbucket.create_file \"path/to/local.file.ext\",\n                   \"destination/path/file.ext\",\n                   encryption_key: key\n\n# Store your key and hash securely for later use.\nfile = bucket.file \"destination/path/file.ext\",\n                   encryption_key: key"},{"caption":"<p>Create a file with gzip-encoded data.</p>","code":"require \"zlib\"\nrequire \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\ngz = StringIO.new \"\"\nz = Zlib::GzipWriter.new gz\nz.write \"Hello world!\"\nz.close\ndata = StringIO.new gz.string\n\nbucket = storage.bucket \"my-bucket\"\n\nbucket.create_file data, \"path/to/gzipped.txt\",\n                   content_encoding: \"gzip\"\n\nfile = bucket.file \"path/to/gzipped.txt\"\n\n# The downloaded data is decompressed by default.\nfile.download \"path/to/downloaded/hello.txt\"\n\n# The downloaded data remains compressed with skip_decompress.\nfile.download \"path/to/downloaded/gzipped.txt\",\n              skip_decompress: true"}],"params":[{"name":"file","types":["String","IO"],"description":"Path of the file on the filesystem to\nupload. Can be an IO object, or IO-ish object like StringIO. (If the\nIO object does not have path, a <code>path</code> argument must be also be\nprovided.)","optional":false,"nullable":false},{"name":"path","types":["String"],"description":"Path to store the file in Google Cloud Storage.","optional":true,"default":"nil","nullable":true},{"name":"acl","types":["String"],"description":"A predefined set of access controls to apply to\nthis file.</p>\n\n<p>Acceptable values are:</p>\n\n<ul>\n  <li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,\n<code>authenticatedRead</code> - File owner gets OWNER access, and\nallAuthenticatedUsers get READER access.</li>\n  <li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER\naccess, and project team owners get OWNER access.</li>\n  <li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,\nand project team owners get READER access.</li>\n  <li><code>private</code> - File owner gets OWNER access.</li>\n  <li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER\naccess, and project team members get access according to their\nroles.</li>\n  <li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER\naccess, and allUsers get READER access.</li>\n</ul>","optional":true,"default":"nil","nullable":true},{"name":"cache_control","types":["String"],"description":"The\n<a href=\"https://tools.ietf.org/html/rfc7234#section-5.2\">Cache-Control</a>\nresponse header to be returned when the file is downloaded.","optional":true,"default":"nil","nullable":true},{"name":"content_disposition","types":["String"],"description":"The\n<a href=\"https://tools.ietf.org/html/rfc6266\">Content-Disposition</a>\nresponse header to be returned when the file is downloaded.","optional":true,"default":"nil","nullable":true},{"name":"content_encoding","types":["String"],"description":"The <a href=\"https://tools.ietf.org/html/rfc7231#section-3.1.2.2\">Content-Encoding\n</a> response\nheader to be returned when the file is downloaded. For example,\n<code>content_encoding: \"gzip\"</code> can indicate to clients that the uploaded\ndata is gzip-compressed. However, there is no check to guarantee the\nspecified <code>Content-Encoding</code> has actually been applied to the file\ndata, and incorrectly specifying the file’s encoding could lead\nto unintended behavior on subsequent download requests.","optional":true,"default":"nil","nullable":true},{"name":"content_language","types":["String"],"description":"The\n<a href=\"http://tools.ietf.org/html/bcp47\">Content-Language</a> response\nheader to be returned when the file is downloaded.","optional":true,"default":"nil","nullable":true},{"name":"content_type","types":["String"],"description":"The\n<a href=\"https://tools.ietf.org/html/rfc2616#section-14.17\">Content-Type</a>\nresponse header to be returned when the file is downloaded.","optional":true,"default":"nil","nullable":true},{"name":"crc32c","types":["String"],"description":"The CRC32c checksum of the file data, as\ndescribed in <a href=\"http://tools.ietf.org/html/rfc4960#appendix-B\">RFC 4960, Appendix\nB</a>.\nIf provided, Cloud Storage will only create the file if the value\nmatches the value calculated by the service. See\n<a href=\"https://cloud.google.com/storage/docs/hashes-etags\">Validation</a>\nfor more information.","optional":true,"default":"nil","nullable":true},{"name":"md5","types":["String"],"description":"The MD5 hash of the file data. If provided, Cloud\nStorage will only create the file if the value matches the value\ncalculated by the service. See\n<a href=\"https://cloud.google.com/storage/docs/hashes-etags\">Validation</a> for\nmore information.","optional":true,"default":"nil","nullable":true},{"name":"metadata","types":["Hash"],"description":"A hash of custom, user-provided web-safe keys\nand arbitrary string values that will returned with requests for the\nfile as “x-goog-meta-“ response headers.","optional":true,"default":"nil","nullable":true},{"name":"storage_class","types":["Symbol","String"],"description":"Storage class of the file.\nDetermines how the file is stored and determines the SLA and the\ncost of storage. Accepted values include <code>:multi_regional</code>,\n<code>:regional</code>, <code>:nearline</code>, and <code>:coldline</code>, as well as the equivalent\nstrings returned by <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"storage_class-instance\">#storage_class</a>. For more information, see\n<a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage Classes</a>\nand <a href=\"https://cloud.google.com/storage/docs/per-object-storage-class\">Per-Object Storage\nClass</a>.\nThe default value is the default storage class for the bucket.","optional":true,"default":"nil","nullable":true},{"name":"encryption_key","types":["String"],"description":"Optional. A customer-supplied, AES-256\nencryption key that will be used to encrypt the file.","optional":true,"default":"nil","nullable":true}],"exceptions":[{"type":"ArgumentError","description":""}],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>"],"description":""}]},{"id":"compose-instance","type":"instance","name":"compose","title":["Google","Cloud","Storage","Bucket#compose"],"description":"<p>Concatenates a list of existing files in the bucket into a new file in\nthe bucket. There is a limit (currently 32) to the number of files\nthat can be composed in a single operation.</p>\n\n<p>To compose files encrypted with a customer-supplied encryption key,\nuse the <code>encryption_key</code> option. All source files must have been\nencrypted with the same key, and the resulting destination file will\nalso be encrypted with the same key.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L826","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nsources = [\"path/to/my-file-1.ext\", \"path/to/my-file-2.ext\"]\n\nnew_file = bucket.compose sources, \"path/to/new-file.ext\""},{"caption":"<p>Set the properties of the new file in a block:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nsources = [\"path/to/my-file-1.ext\", \"path/to/my-file-2.ext\"]\n\nnew_file = bucket.compose sources, \"path/to/new-file.ext\" do |f|\n  f.cache_control = \"private, max-age=0, no-cache\"\n  f.content_disposition = \"inline; filename=filename.ext\"\n  f.content_encoding = \"deflate\"\n  f.content_language = \"de\"\n  f.content_type = \"application/json\"\nend"},{"caption":"<p>Specify the generation of source files (but skip retrieval):</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile_1 = bucket.file \"path/to/my-file-1.ext\",\n                     generation: 1490390259479000, skip_lookup: true\nfile_2 = bucket.file \"path/to/my-file-2.ext\",\n                     generation: 1490310974144000, skip_lookup: true\n\nnew_file = bucket.compose [file_1, file_2], \"path/to/new-file.ext\""}],"params":[{"name":"sources","types":["Array<String, Google::Cloud::Storage::File>"],"description":"The list\nof source file names or objects that will be concatenated into a\nsingle file.","optional":false,"nullable":false},{"name":"destination","types":["String"],"description":"The name of the new file.","optional":false,"nullable":false},{"name":"acl","types":["String"],"description":"A predefined set of access controls to apply to\nthis file.</p>\n\n<p>Acceptable values are:</p>\n\n<ul>\n  <li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,\n<code>authenticatedRead</code> - File owner gets OWNER access, and\nallAuthenticatedUsers get READER access.</li>\n  <li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER\naccess, and project team owners get OWNER access.</li>\n  <li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,\nand project team owners get READER access.</li>\n  <li><code>private</code> - File owner gets OWNER access.</li>\n  <li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER\naccess, and project team members get access according to their\nroles.</li>\n  <li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER\naccess, and allUsers get READER access.</li>\n</ul>","optional":true,"default":"nil","nullable":true},{"name":"encryption_key","types":["String","nil"],"description":"Optional. The customer-supplied,\nAES-256 encryption key used to encrypt the source files, if one was\nused. All source files must have been encrypted with the same key,\nand the resulting destination file will also be encrypted with the\nkey.","optional":true,"default":"nil","nullable":true},{"name":"yield","types":["block"],"description":"A block yielding a delegate file object for setting the\nproperties of the destination file.","optional":true,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>"],"description":"The new file."}]},{"id":"signed_url-instance","type":"instance","name":"signed_url","title":["Google","Cloud","Storage","Bucket#signed_url"],"description":"<p>Access without authentication can be granted to a File for a specified\nperiod of time. This URL uses a cryptographic signature of your\ncredentials to access the file identified by <code>path</code>. A URL can be\ncreated for paths that do not yet exist. For instance, a URL can be\ncreated to <code>PUT</code> file contents to.</p>\n\n<p>Generating a URL requires service account credentials, either by\nconnecting with a service account when calling\nGoogle::Cloud.storage, or by passing in the service account <code>issuer</code>\nand <code>signing_key</code> values. Although the private key can be passed as a\nstring for convenience, creating and storing an instance of\n<code>OpenSSL::PKey::RSA</code> is more efficient when making multiple calls to\n<code>signed_url</code>.</p>\n\n<p>A <a data-custom-type=\"google/cloud/storage/signedurlunavailable\">SignedUrlUnavailable</a> is raised if the service account credentials\nare missing. Service account credentials are acquired by following the\nsteps in <a href=\"https://cloud.google.com/storage/docs/authentication#service_accounts\">Service Account Authentication</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L944","resources":[{"title":"Access Control Signed URLs guide","link":"https://cloud.google.com/storage/docs/access-control#Signed-URLs"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nshared_url = bucket.signed_url \"avatars/heidi/400x400.png\""},{"caption":"<p>Any of the option parameters may be specified:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nshared_url = bucket.signed_url \"avatars/heidi/400x400.png\",\n                               method: \"PUT\",\n                               content_type: \"image/png\",\n                               expires: 300 # 5 minutes from now"},{"caption":"<p>Using the issuer and signing_key options:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nkey = OpenSSL::PKey::RSA.new \"-----BEGIN PRIVATE KEY-----\\n...\"\nshared_url = bucket.signed_url \"avatars/heidi/400x400.png\",\n                               issuer: \"service-account@gcloud.com\",\n                               signing_key: key"},{"caption":"<p>Using the headers option:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nshared_url = bucket.signed_url \"avatars/heidi/400x400.png\",\n                               headers: {\n                                 \"x-goog-acl\" => \"private\",\n                                 \"x-goog-meta-foo\" => \"bar,baz\"\n                               }"}],"params":[{"name":"path","types":["String"],"description":"Path to the file in Google Cloud Storage.","optional":false,"nullable":false},{"name":"method","types":["String"],"description":"The HTTP verb to be used with the signed URL.\nSigned URLs can be used\nwith <code>GET</code>, <code>HEAD</code>, <code>PUT</code>, and <code>DELETE</code> requests. Default is <code>GET</code>.","optional":true,"default":"nil","nullable":true},{"name":"expires","types":["Integer"],"description":"The number of seconds until the URL expires.\nDefault is 300/5 minutes.","optional":true,"default":"nil","nullable":true},{"name":"content_type","types":["String"],"description":"When provided, the client (browser) must\nsend this value in the HTTP header. e.g. <code>text/plain</code>","optional":true,"default":"nil","nullable":true},{"name":"content_md5","types":["String"],"description":"The MD5 digest value in base64. If you\nprovide this in the string, the client (usually a browser) must\nprovide this HTTP header with this same value in its request.","optional":true,"default":"nil","nullable":true},{"name":"headers","types":["Hash"],"description":"Google extension headers (custom HTTP headers\nthat begin with <code>x-goog-</code>) that must be included in requests that\nuse the signed URL.","optional":true,"default":"nil","nullable":true},{"name":"issuer","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"client_email","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"signing_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true},{"name":"private_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true},{"name":"query","types":["Hash"],"description":"Query string parameters to include in the signed\nURL. The given parameters are not verified by the signature.</p>\n\n<p>Parameters such as <code>response-content-disposition</code> and\n<code>response-content-type</code> can alter the behavior of the response when\nusing the URL, but only when the file resource is missing the\ncorresponding values. (These values can be permanently set using\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_disposition=-instance\">File#content_disposition=</a> and <a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_type=-instance\">File#content_type=</a>.)","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[]},{"id":"post_object-instance","type":"instance","name":"post_object","title":["Google","Cloud","Storage","Bucket#post_object"],"description":"<p>Generate a PostObject that includes the fields and url to\nupload objects via html forms.</p>\n\n<p>Generating a PostObject requires service account credentials,\neither by connecting with a service account when calling\nGoogle::Cloud.storage, or by passing in the service account\n<code>issuer</code> and <code>signing_key</code> values. Although the private key can\nbe passed as a string for convenience, creating and storing\nan instance of # <code>OpenSSL::PKey::RSA</code> is more efficient\nwhen making multiple calls to <code>post_object</code>.</p>\n\n<p>A <a data-custom-type=\"google/cloud/storage/signedurlunavailable\">SignedUrlUnavailable</a> is raised if the service account credentials\nare missing. Service account credentials are acquired by following the\nsteps in <a href=\"https://cloud.google.com/storage/docs/authentication#service_accounts\">Service Account Authentication</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1054","resources":[{"title":"","link":"https://cloud.google.com/storage/docs/xml-api/post-object"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\npost = bucket.post_object \"avatars/heidi/400x400.png\"\n\npost.url #=> \"https://storage.googleapis.com\"\npost.fields[:key] #=> \"my-todo-app/avatars/heidi/400x400.png\"\npost.fields[:GoogleAccessId] #=> \"0123456789@gserviceaccount.com\"\npost.fields[:signature] #=> \"ABC...XYZ=\"\npost.fields[:policy] #=> \"ABC...XYZ=\""},{"caption":"<p>Using a policy to define the upload authorization:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\npolicy = {\n  expiration: (Time.now + 3600).iso8601,\n  conditions: [\n    [\"starts-with\", \"$key\", \"\"],\n    {acl: \"bucket-owner-read\"},\n    {bucket: \"travel-maps\"},\n    {success_action_redirect: \"http://example.com/success.html\"},\n    [\"eq\", \"$Content-Type\", \"image/jpeg\"],\n    [\"content-length-range\", 0, 1000000]\n  ]\n}\n\nbucket = storage.bucket \"my-todo-app\"\npost = bucket.post_object \"avatars/heidi/400x400.png\",\n                           policy: policy\n\npost.url #=> \"https://storage.googleapis.com\"\npost.fields[:key] #=> \"my-todo-app/avatars/heidi/400x400.png\"\npost.fields[:GoogleAccessId] #=> \"0123456789@gserviceaccount.com\"\npost.fields[:signature] #=> \"ABC...XYZ=\"\npost.fields[:policy] #=> \"ABC...XYZ=\""},{"caption":"<p>Using the issuer and signing_key options:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nkey = OpenSSL::PKey::RSA.new\npost = bucket.post_object \"avatars/heidi/400x400.png\",\n                          issuer: \"service-account@gcloud.com\",\n                          signing_key: key\n\npost.url #=> \"https://storage.googleapis.com\"\npost.fields[:key] #=> \"my-todo-app/avatars/heidi/400x400.png\"\npost.fields[:GoogleAccessId] #=> \"0123456789@gserviceaccount.com\"\npost.fields[:signature] #=> \"ABC...XYZ=\"\npost.fields[:policy] #=> \"ABC...XYZ=\""}],"params":[{"name":"path","types":["String"],"description":"Path to the file in Google Cloud Storage.","optional":false,"nullable":false},{"name":"policy","types":["Hash"],"description":"The security policy that describes what\ncan and cannot be uploaded in the form. When provided,\nthe PostObject fields will include a Signature based on the JSON\nrepresentation of this Hash and the same policy in Base64 format.\nIf you do not provide a security policy, requests are considered\nto be anonymous and will only work with buckets that have granted\nWRITE or FULL_CONTROL permission to anonymous users.\nSee <a href=\"https://cloud.google.com/storage/docs/xml-api/post-object#policydocument\">Policy Document</a>\nfor more information.","optional":true,"default":"nil","nullable":true},{"name":"issuer","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"client_email","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"signing_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true},{"name":"private_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/postobject\">PostObject</a>"],"description":""}]},{"id":"acl-instance","type":"instance","name":"acl","title":["Google","Cloud","Storage","Bucket#acl"],"description":"<p>The Bucket::Acl instance used to control access to the bucket.</p>\n\n<p>A bucket has owners, writers, and readers. Permissions can be granted\nto an individual user’s email address, a group’s email address, as\nwell as many predefined lists.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1104","resources":[{"title":"Access\nControl guide","link":"https://cloud.google.com/storage/docs/access-control"}],"examples":[{"caption":"<p>Grant access to a user by prepending <code>\"user-\"</code> to an email:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nemail = \"heidi@example.net\"\nbucket.acl.add_reader \"user-#{email}\""},{"caption":"<p>Grant access to a group by prepending <code>\"group-\"</code> to an email:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nemail = \"authors@example.net\"\nbucket.acl.add_reader \"group-#{email}\""},{"caption":"<p>Or, grant access via a predefined permissions list:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nbucket.acl.public!"}],"params":[],"exceptions":[],"returns":[]},{"id":"default_acl-instance","type":"instance","name":"default_acl","title":["Google","Cloud","Storage","Bucket#default_acl"],"description":"<p>The Bucket::DefaultAcl instance used to control access to the bucket’s\nfiles.</p>\n\n<p>A bucket’s files have owners, writers, and readers. Permissions can be\ngranted to an individual user’s email address, a group’s email\naddress, as well as many predefined lists.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1148","resources":[{"title":"Access\nControl guide","link":"https://cloud.google.com/storage/docs/access-control"}],"examples":[{"caption":"<p>Grant access to a user by prepending <code>\"user-\"</code> to an email:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nemail = \"heidi@example.net\"\nbucket.default_acl.add_reader \"user-#{email}\""},{"caption":"<p>Grant access to a group by prepending <code>\"group-\"</code> to an email</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nemail = \"authors@example.net\"\nbucket.default_acl.add_reader \"group-#{email}\""},{"caption":"<p>Or, grant access via a predefined permissions list:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nbucket.default_acl.public!"}],"params":[],"exceptions":[],"returns":[]},{"id":"policy-instance","type":"instance","name":"policy","title":["Google","Cloud","Storage","Bucket#policy"],"description":"<p>Gets and updates the <a href=\"https://cloud.google.com/iam/\">Cloud IAM</a> access\ncontrol policy for this bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1193","resources":[{"title":"Managing\nPolicies","link":"https://cloud.google.com/iam/docs/managing-policies"},{"title":"Buckets: setIamPolicy","link":"https://cloud.google.com/storage/docs/json_api/v1/buckets/setIamPolicy"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\npolicy = bucket.policy"},{"caption":"<p>Retrieve the latest policy and update it in a block:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\nbucket.policy do |p|\n  p.add \"roles/owner\", \"user:owner@example.com\"\nend"}],"params":[{"name":"force","types":["Boolean"],"description":"[Deprecated] Force the latest policy to be\nretrieved from the Storage service when <code>true</code>. Deprecated because\nthe latest policy is now always retrieved. The default is <code>nil</code>.","optional":true,"default":"nil","nullable":true},{"name":"yield","types":["block"],"description":"A block for updating the policy. The latest policy\nwill be read from the service and passed to the block. After the\nblock completes, the modified policy will be written to the service.","optional":true,"nullable":false},{"name":"yield.policy","types":["Policy"],"description":"the current Cloud IAM Policy for this\nbucket","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/policy\">Policy</a>"],"description":"the current Cloud IAM Policy for this bucket"}]},{"id":"update_policy-instance","type":"instance","name":"update_policy","title":["Google","Cloud","Storage","Bucket#update_policy"],"description":"<p>Updates the <a href=\"https://cloud.google.com/iam/\">Cloud IAM</a> access control\npolicy for this bucket. The policy should be read from <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"policy-instance\">#policy</a>. See\n<a data-custom-type=\"google/cloud/storage/policy\">Google::Cloud::Storage::Policy</a> for an explanation of the\npolicy <code>etag</code> property and how to modify policies.</p>\n\n<p>You can also update the policy by passing a block to <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"policy-instance\">#policy</a>, which\nwill call this method internally after the block completes.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1235","resources":[{"title":"Managing\nPolicies","link":"https://cloud.google.com/iam/docs/managing-policies"},{"title":"Buckets: setIamPolicy","link":"https://cloud.google.com/storage/docs/json_api/v1/buckets/setIamPolicy"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\npolicy = bucket.policy # API call\n\npolicy.add \"roles/owner\", \"user:owner@example.com\"\n\nbucket.update_policy policy # API call"}],"params":[{"name":"new_policy","types":["Policy"],"description":"a new or modified Cloud IAM Policy for this\nbucket","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/policy\">Policy</a>"],"description":"The policy returned by the API update operation."}]},{"id":"test_permissions-instance","type":"instance","name":"test_permissions","title":["Google","Cloud","Storage","Bucket#test_permissions"],"description":"<p>Tests the specified permissions against the <a href=\"https://cloud.google.com/iam/\">Cloud\nIAM</a> access control policy.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1269","resources":[{"title":"Managing\nPolicies","link":"https://cloud.google.com/iam/docs/managing-policies"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\n\npermissions = bucket.test_permissions \"storage.buckets.get\",\n                                      \"storage.buckets.delete\"\npermissions.include? \"storage.buckets.get\"    #=> true\npermissions.include? \"storage.buckets.delete\" #=> false"}],"params":[{"name":"permissions","types":["String","Array<String>"],"description":"The set of permissions\nagainst which to check access. Permissions must be of the format\n<code>storage.resource.capability</code>, where resource is one of <code>buckets</code> or\n<code>objects</code>.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Array&lt;String&gt;"],"description":"The permissions held by the caller."}]},{"id":"notifications-instance","type":"instance","name":"notifications","title":["Google","Cloud","Storage","Bucket#notifications"],"description":"<p>Retrieves the entire list of Pub/Sub notification subscriptions for\nthe bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1297","resources":[{"title":"Cloud\nPub/Sub Notifications for Google Cloud","link":"https://cloud.google.com/storage/docs/pubsub-notifications"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\nnotifications = bucket.notifications\nnotifications.each do |notification|\n  puts notification.id\nend"}],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/storage/notification\">Google::Cloud::Storage::Notification</a>&gt;"],"description":""}]},{"id":"notification-instance","type":"instance","name":"notification","title":["Google","Cloud","Storage","Bucket#notification"],"description":"<p>Retrieves a Pub/Sub notification subscription for the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1328","resources":[{"title":"Cloud\nPub/Sub Notifications for Google Cloud","link":"https://cloud.google.com/storage/docs/pubsub-notifications"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nnotification = bucket.notification \"1\"\nputs notification.id"}],"params":[{"name":"id","types":["String"],"description":"The Notification ID.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/notification\">Google::Cloud::Storage::Notification</a>","nil"],"description":"Returns nil if the\nnotification does not exist"}]},{"id":"create_notification-instance","type":"instance","name":"create_notification","title":["Google","Cloud","Storage","Bucket#create_notification"],"description":"<p>Creates a new Pub/Sub notification subscription for the bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1406","resources":[{"title":"Cloud\nPub/Sub Notifications for Google Cloud","link":"https://cloud.google.com/storage/docs/pubsub-notifications"}],"examples":[{"caption":"","code":"require \"google/cloud/pubsub\"\nrequire \"google/cloud/storage\"\n\npubsub = Google::Cloud::Pubsub.new\ntopic = pubsub.create_topic \"my-topic\"\ntopic.policy do |p|\n  p.add \"roles/pubsub.publisher\",\n        \"serviceAccount:my-project\" \\\n        \"@gs-project-accounts.iam.gserviceaccount.com\"\nend\n\nstorage = Google::Cloud::Storage.new\nbucket = storage.bucket \"my-bucket\"\n\nnotification = bucket.create_notification topic.name"}],"params":[{"name":"topic","types":["String"],"description":"The name of the Cloud PubSub topic to which the\nnotification subscription will publish.","optional":false,"nullable":false},{"name":"custom_attrs","types":["Hash(String => String)"],"description":"The custom attributes for\nthe notification. An optional list of additional attributes to\nattach to each Cloud Pub/Sub message published for the notification\nsubscription.","optional":true,"default":"nil","nullable":true},{"name":"event_types","types":["Symbol","String","Array<Symbol, String>"],"description":"The event\ntypes for the notification subscription. If provided, messages will\nonly be sent for the listed event types. If empty, messages will be\nsent for all event types.</p>\n\n<p>Acceptable values are:</p>\n\n<ul>\n  <li><code>:finalize</code> - Sent when a new object (or a new generation of\nan existing object) is successfully created in the bucket. This\nincludes copying or rewriting an existing object. A failed upload\ndoes not trigger this event.</li>\n  <li><code>:update</code> - Sent when the metadata of an existing object changes.</li>\n  <li><code>:delete</code> - Sent when an object has been permanently deleted. This\nincludes objects that are overwritten or are deleted as part of\nthe bucket’s lifecycle configuration. For buckets with object\nversioning enabled, this is not sent when an object is archived\n(see <code>OBJECT_ARCHIVE</code>), even if archival occurs via the\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"delete-instance\">File#delete</a> method.</li>\n  <li><code>:archive</code> - Only sent when the bucket has enabled object\nversioning. This event indicates that the live version of an\nobject has become an archived version, either because it was\narchived or because it was overwritten by the upload of an object\nof the same name.</li>\n</ul>","optional":true,"default":"nil","nullable":true},{"name":"prefix","types":["String"],"description":"The file name prefix for the notification\nsubscription. If provided, the notification will only be applied to\nfile names that begin with this prefix.","optional":true,"default":"nil","nullable":true},{"name":"payload","types":["Symbol","String","Boolean"],"description":"The desired content of the\nPub/Sub message payload. Acceptable values are:</p>\n\n<ul>\n  <li><code>:json</code> or <code>true</code> - The Pub/Sub message payload will be a UTF-8\nstring containing the <a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects#resource-representations\">resource\nrepresentation</a>\nof the file’s metadata.</li>\n  <li><code>:none</code> or <code>false</code> - No payload is included with the notification.</li>\n</ul>\n\n<p>The default value is <code>:json</code>.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/notification\">Google::Cloud::Storage::Notification</a>"],"description":""}]},{"id":"reload!-instance","type":"instance","name":"reload!","title":["Google","Cloud","Storage","Bucket#reload!"],"description":"<p>Reloads the bucket with current data from the Storage service.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1420","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"exists?-instance","type":"instance","name":"exists?","title":["Google","Cloud","Storage","Bucket#exists?"],"description":"<p>Determines whether the bucket exists in the Storage service.</p>","source":"google-cloud-storage/lib/google/cloud/storage/bucket.rb#L1431","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]}]}