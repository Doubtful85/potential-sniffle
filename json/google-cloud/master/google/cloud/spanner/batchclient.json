{"id":"google/cloud/spanner/batchclient","name":"BatchClient","title":["Google","Cloud","Spanner","BatchClient"],"description":"<h1 id=\"batchclient\">BatchClient</h1>\n\n<p>Provides a batch client that can be used to read data from a Cloud\nSpanner database. An instance of this class is tied to a specific\ndatabase.</p>\n\n<p>BatchClient is useful when one wants to read or query a large amount of\ndata from Cloud Spanner across multiple processes, even across different\nmachines. It allows to create partitions of Cloud Spanner database and\nthen read or query over each partition independently yet at the same\nsnapshot.</p>\n\n<p>See Google::Cloud::Spanner::Project#batch_client.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L65","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\nbatch_snapshot = batch_client.batch_snapshot\n\npartitions = batch_snapshot.partition_read \"users\", [:id, :name]\n\npartition = partitions.first\n\nserialized_snapshot = batch_snapshot.dump\nserialized_partition = partition.dump\n\n# In a separate process\nnew_batch_snapshot = batch_client.load_batch_snapshot \\\n  serialized_snapshot\n\nnew_partition = batch_client.load_partition \\\n  serialized_partition\n\nresults = new_batch_snapshot.execute_partition \\\n  new_partition"}],"methods":[{"id":"project_id-instance","type":"instance","name":"project_id","title":["Google","Cloud","Spanner","BatchClient#project_id"],"description":"<p>The unique identifier for the project.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L77","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"instance_id-instance","type":"instance","name":"instance_id","title":["Google","Cloud","Spanner","BatchClient#instance_id"],"description":"<p>The unique identifier for the instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L83","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"database_id-instance","type":"instance","name":"database_id","title":["Google","Cloud","Spanner","BatchClient#database_id"],"description":"<p>The unique identifier for the database.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L89","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"project-instance","type":"instance","name":"project","title":["Google","Cloud","Spanner","BatchClient#project"],"description":"<p>The Spanner project connected to.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L95","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/project\">Project</a>"],"description":""}]},{"id":"instance-instance","type":"instance","name":"instance","title":["Google","Cloud","Spanner","BatchClient#instance"],"description":"<p>The Spanner instance connected to.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L101","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/instance\">Instance</a>"],"description":""}]},{"id":"database-instance","type":"instance","name":"database","title":["Google","Cloud","Spanner","BatchClient#database"],"description":"<p>The Spanner database connected to.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L107","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/database\">Database</a>"],"description":""}]},{"id":"batch_snapshot-instance","type":"instance","name":"batch_snapshot","title":["Google","Cloud","Spanner","BatchClient#batch_snapshot"],"description":"<p>Returns a <a data-custom-type=\"google/cloud/spanner/batchsnapshot\">BatchSnapshot</a> context in which multiple reads and/or\nqueries can be performed. All reads/queries will use the same\ntimestamp, and the timestamp can be inspected after this transaction\nis created successfully. This is a blocking method since it waits to\nfinish the RPCs.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L178","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\nbatch_snapshot = batch_client.batch_snapshot\n\npartitions = batch_snapshot.partition_read \"users\", [:id, :name]\n\npartition = partitions.first\n\nserialized_snapshot = batch_snapshot.dump\nserialized_partition = partition.dump\n\n# In a separate process\nnew_batch_snapshot = batch_client.load_batch_snapshot \\\n  serialized_snapshot\n\nnew_partition = batch_client.load_partition \\\n  serialized_partition\n\nresults = new_batch_snapshot.execute_partition \\\n  new_partition"}],"params":[{"name":"strong","types":["true","false"],"description":"Read at a timestamp where all previously\ncommitted transactions are visible.","optional":true,"default":"nil","nullable":true},{"name":"timestamp","types":["Time","DateTime"],"description":"Executes all reads at the given\ntimestamp. Unlike other modes, reads at a specific timestamp are\nrepeatable; the same read at the same timestamp always returns the\nsame data. If the timestamp is in the future, the read will block\nuntil the specified timestamp, modulo the read’s deadline.</p>\n\n<p>Useful for large scale consistent reads such as mapreduces, or for\ncoordinating many reads against a consistent snapshot of the data.\n(See\n<a href=\"https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.v1#transactionoptions\">TransactionOptions</a>.)","optional":true,"default":"nil","nullable":true},{"name":"read_timestamp","types":["Time","DateTime"],"description":"Same as <code>timestamp</code>.","optional":true,"default":"nil","nullable":true},{"name":"staleness","types":["Numeric"],"description":"Executes all reads at a timestamp that is\n<code>staleness</code> seconds old. For example, the number 10.1 is translated\nto 10 seconds and 100 milliseconds.</p>\n\n<p>Guarantees that all writes that have committed more than the\nspecified number of seconds ago are visible. Because Cloud Spanner\nchooses the exact timestamp, this mode works even if the client’s\nlocal clock is substantially skewed from Cloud Spanner commit\ntimestamps.</p>\n\n<p>Useful for reading at nearby replicas without the distributed\ntimestamp negotiation overhead of single-use <code>staleness</code>. (See\n<a href=\"https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.v1#transactionoptions\">TransactionOptions</a>.)","optional":true,"default":"nil","nullable":true},{"name":"exact_staleness","types":["Numeric"],"description":"Same as <code>staleness</code>.","optional":true,"default":"nil","nullable":true},{"name":"yield","types":["block"],"description":"The block for reading and writing data.","optional":true,"nullable":false},{"name":"yield.snapshot","types":["Google::Cloud::Spanner::Snapshot"],"description":"The Snapshot\nobject.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/batchsnapshot\">Google::Cloud::Spanner::BatchSnapshot</a>"],"description":""}]},{"id":"load_batch_snapshot-instance","type":"instance","name":"load_batch_snapshot","title":["Google","Cloud","Spanner","BatchClient#load_batch_snapshot"],"description":"<p>Returns a <a data-custom-type=\"google/cloud/spanner/batchsnapshot\">BatchSnapshot</a> context in which multiple reads and/or\nqueries can be performed. All reads/queries will use the same\ntimestamp, and the timestamp can be inspected after this transaction\nis created successfully. This method does not perform an RPC.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L231","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\nbatch_snapshot = batch_client.batch_snapshot\n\npartitions = batch_snapshot.partition_read \"users\", [:id, :name]\n\npartition = partitions.first\n\nserialized_snapshot = batch_snapshot.dump\nserialized_partition = partition.dump\n\n# In a separate process\nnew_batch_snapshot = batch_client.load_batch_snapshot \\\n  serialized_snapshot\n\nnew_partition = batch_client.load_partition \\\n  serialized_partition\n\nresults = new_batch_snapshot.execute_partition \\\n  new_partition"}],"params":[{"name":"serialized_snapshot","types":["String"],"description":"The serialized representation of\nan existing batch snapshot. See <a data-custom-type=\"google/cloud/spanner/batchsnapshot\" data-method=\"dump-instance\">BatchSnapshot#dump</a>.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/batchsnapshot\">Google::Cloud::Spanner::BatchSnapshot</a>"],"description":""}]},{"id":"load_partition-instance","type":"instance","name":"load_partition","title":["Google","Cloud","Spanner","BatchClient#load_partition"],"description":"<p>Returns a <a data-custom-type=\"google/cloud/spanner/partition\">Partition</a> from a serialized representation. See\n<a data-custom-type=\"google/cloud/spanner/partition\" data-method=\"load-class\">Partition.load</a>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L272","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\nbatch_snapshot = batch_client.batch_snapshot\n\npartitions = batch_snapshot.partition_read \"users\", [:id, :name]\n\npartition = partitions.first\n\nserialized_snapshot = batch_snapshot.dump\nserialized_partition = partition.dump\n\n# In a separate process\nnew_batch_snapshot = batch_client.load_batch_snapshot \\\n  serialized_snapshot\n\nnew_partition = batch_client.load_partition \\\n  serialized_partition\n\nresults = new_batch_snapshot.execute_partition \\\n  new_partition"}],"params":[{"name":"serialized_partition","types":["String"],"description":"The serialized representation of\nan existing batch partition. See <a data-custom-type=\"google/cloud/spanner/partition\" data-method=\"dump-instance\">Partition#dump</a>.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/partition\">Google::Cloud::Spanner::Partition</a>"],"description":""}]},{"id":"fields-instance","type":"instance","name":"fields","title":["Google","Cloud","Spanner","BatchClient#fields"],"description":"<p>Creates a configuration object (<a data-custom-type=\"google/cloud/spanner/fields\">Fields</a>) that may be provided to\nqueries or used to create STRUCT objects. (The STRUCT will be\nrepresented by the <a data-custom-type=\"google/cloud/spanner/data\">Data</a> class.) See <a data-custom-type=\"google/cloud/spanner/client\" data-method=\"execute-instance\">Client#execute</a> and/or\n<a data-custom-type=\"google/cloud/spanner/fields\" data-method=\"struct-instance\">Fields#struct</a>.</p>\n\n<p>For more information, see <a href=\"https://cloud.google.com/spanner/docs/data-types#constructing-a-struct\">Data Types - Constructing a\nSTRUCT</a>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L346","resources":[],"examples":[{"caption":"<p>Create a STRUCT value with named fields using Fields object:</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\nnamed_type = batch_client.fields(\n  { id: :INT64, name: :STRING, active: :BOOL }\n)\nnamed_data = named_type.struct(\n  { id: 42, name: nil, active: false }\n)"},{"caption":"<p>Create a STRUCT value with anonymous field names:</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\nanon_type = batch_client.fields [:INT64, :STRING, :BOOL]\nanon_data = anon_type.struct [42, nil, false]"},{"caption":"<p>Create a STRUCT value with duplicate field names:</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\n\ndup_type = batch_client.fields(\n  [[:x, :INT64], [:x, :STRING], [:x, :BOOL]]\n)\ndup_data = dup_type.struct [42, nil, false]"}],"params":[{"name":"types","types":["Array","Hash"],"description":"Accepts an array or hash types.</p>\n\n<p>Arrays can contain just the type value, or a sub-array of the\nfield’s name and type value. Hash keys must contain the field name\nas a <code>Symbol</code> or <code>String</code>, or the field position as an <code>Integer</code>.\nHash values must contain the type value. If a Hash is used the\nfields will be created using the same order as the Hash keys.</p>\n\n<p>Supported type values incude:</p>\n\n<ul>\n  <li><code>:BOOL</code></li>\n  <li><code>:BYTES</code></li>\n  <li><code>:DATE</code></li>\n  <li><code>:FLOAT64</code></li>\n  <li><code>:INT64</code></li>\n  <li><code>:STRING</code></li>\n  <li><code>:TIMESTAMP</code></li>\n  <li><code>Array</code> - Lists are specified by providing the type code in an\narray. For example, an array of integers are specified as\n<code>[:INT64]</code>.</li>\n  <li><a data-custom-type=\"google/cloud/spanner/fields\">Fields</a> - Nested Structs are specified by providing a Fields\nobject.</li>\n</ul>","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/fields\">Fields</a>"],"description":"The fields of the given types."}]},{"id":"range-instance","type":"instance","name":"range","title":["Google","Cloud","Spanner","BatchClient#range"],"description":"<p>Creates a Spanner Range. This can be used in place of a Ruby Range\nwhen needing to exclude the beginning value.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/batch_client.rb#L377","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\nbatch_client = spanner.batch_client \"my-instance\", \"my-database\"\nbatch_snapshot = batch_client.batch_snapshot\n\nkey_range = batch_client.range 1, 100\n\npartitions = batch_snapshot.partition_read \"users\", [:id, :name],\n                                        keys: key_range"}],"params":[{"name":"beginning","types":["Object"],"description":"The object that defines the beginning of the\nrange.","optional":false,"nullable":false},{"name":"ending","types":["Object"],"description":"The object that defines the end of the range.","optional":false,"nullable":false},{"name":"exclude_begin","types":["Boolean"],"description":"Determines if the range excludes its\nbeginning value. Default is <code>false</code>.","optional":true,"default":"false","nullable":false},{"name":"exclude_end","types":["Boolean"],"description":"Determines if the range excludes its\nending value. Default is <code>false</code>.","optional":true,"default":"false","nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/range\">Google::Cloud::Spanner::Range</a>"],"description":"The new Range instance."}]}]}