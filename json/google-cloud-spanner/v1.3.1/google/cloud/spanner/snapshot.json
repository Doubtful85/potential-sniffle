{"id":"google/cloud/spanner/snapshot","name":"Snapshot","title":["Google","Cloud","Spanner","Snapshot"],"description":"<h1 id=\"snapshot\">Snapshot</h1>\n\n<p>A snapshot in Cloud Spanner is a set of reads that execute atomically at\na single logical point in time across columns, rows, and tables in a\ndatabase.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/snapshot.rb#L43","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ndb = spanner.client \"my-instance\", \"my-database\"\n\ndb.snapshot do |snp|\n  results = snp.execute \"SELECT * FROM users\"\n\n  results.rows.each do |row|\n    puts \"User #{row[:id]} is #{row[:name]}\"\n  end\nend"}],"methods":[{"id":"transaction_id-instance","type":"instance","name":"transaction_id","title":["Google","Cloud","Spanner","Snapshot#transaction_id"],"description":"<p>Identifier of the transaction results were run in.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/snapshot.rb#L50","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":"The transaction id."}]},{"id":"timestamp-instance","type":"instance","name":"timestamp","title":["Google","Cloud","Spanner","Snapshot#timestamp"],"description":"<p>The read timestamp chosen for snapshots.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/snapshot.rb#L58","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Time"],"description":"The chosen timestamp."}]},{"id":"execute-instance","type":"instance","name":"execute","title":["Google","Cloud","Spanner","Snapshot#execute"],"description":"<p>Executes a SQL query.</p>\n\n<p>Arguments can be passed using <code>params</code>, Ruby types are mapped to\nSpanner types as follows:</p>\n\n<table class=\"table\">\n  <thead>\n    <tr>\n      <th>Spanner</th>\n      <th>Ruby</th>\n      <th>Notes</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>BOOL</code></td>\n      <td><code>true</code>/<code>false</code></td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>INT64</code></td>\n      <td><code>Integer</code></td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>FLOAT64</code></td>\n      <td><code>Float</code></td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>STRING</code></td>\n      <td><code>String</code></td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>DATE</code></td>\n      <td><code>Date</code></td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>TIMESTAMP</code></td>\n      <td><code>Time</code>, <code>DateTime</code></td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>BYTES</code></td>\n      <td><code>File</code>, <code>IO</code>, <code>StringIO</code>, or similar</td>\n      <td> </td>\n    </tr>\n    <tr>\n      <td><code>ARRAY</code></td>\n      <td><code>Array</code></td>\n      <td>Nested arrays are not supported.</td>\n    </tr>\n  </tbody>\n</table>\n\n<p>See <a href=\"https://cloud.google.com/spanner/docs/data-definition-language#data_types\">Data\ntypes</a>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/snapshot.rb#L152","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ndb = spanner.client \"my-instance\", \"my-database\"\n\ndb.snapshot do |snp|\n  results = snp.execute \"SELECT * FROM users\"\n\n  results.rows.each do |row|\n    puts \"User #{row[:id]} is #{row[:name]}\"\n  end\nend"},{"caption":"<p>Query using query parameters:</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ndb = spanner.client \"my-instance\", \"my-database\"\n\ndb.snapshot do |snp|\n  results = snp.execute \"SELECT * FROM users \" \\\n                        \"WHERE active = @active\",\n                        params: { active: true }\n\n  results.rows.each do |row|\n    puts \"User #{row[:id]} is #{row[:name]}\"\n  end\nend"}],"params":[{"name":"sql","types":["String"],"description":"The SQL query string. See <a href=\"https://cloud.google.com/spanner/docs/query-syntax\">Query\nsyntax</a>.</p>\n\n<p>The SQL query string can contain parameter placeholders. A parameter\nplaceholder consists of “@” followed by the parameter name.\nParameter names consist of any combination of letters, numbers, and\nunderscores.","optional":false,"nullable":false},{"name":"params","types":["Hash"],"description":"SQL parameters for the query string. The\nparameter placeholders, minus the “@”, are the the hash keys, and\nthe literal values are the hash values. If the query string contains\nsomething like “WHERE id &gt; @msg_id”, then the params must contain\nsomething like <code>:msg_id =&gt; 1</code>.","optional":true,"default":"nil","nullable":true},{"name":"types","types":["Hash"],"description":"Types of the SQL parameters in <code>params</code>. It is not\nalways possible for Cloud Spanner to infer the right SQL type from a\nvalue in <code>params</code>. In these cases, the <code>types</code> hash can be used to\nspecify the exact SQL type for some or all of the SQL query\nparameters.</p>\n\n<p>The keys of the hash should be query string parameter placeholders,\nminus the “@”. The values of the hash should be Cloud Spanner type\ncodes from the following list:</p>\n\n<ul>\n  <li><code>:BOOL</code></li>\n  <li><code>:BYTES</code></li>\n  <li><code>:DATE</code></li>\n  <li><code>:FLOAT64</code></li>\n  <li><code>:INT64</code></li>\n  <li><code>:STRING</code></li>\n  <li><code>:TIMESTAMP</code></li>\n</ul>\n\n<p>Arrays are specified by providing the type code in an array. For\nexample, an array of integers are specified as <code>[:INT64]</code>.</p>\n\n<p>Structs are not yet supported in query parameters.</p>\n\n<p>Types are optional.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/results\">Google::Cloud::Spanner::Results</a>"],"description":"The results of the query\nexecution."}]},{"id":"read-instance","type":"instance","name":"read","title":["Google","Cloud","Spanner","Snapshot#read"],"description":"<p>Read rows from a database table, as a simple alternative to\n<a data-custom-type=\"google/cloud/spanner/snapshot\" data-method=\"execute-instance\">#execute</a>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/snapshot.rb#L196","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ndb = spanner.client \"my-instance\", \"my-database\"\n\ndb.snapshot do |snp|\n  results = snp.read \"users\", [:id, :name]\n\n  results.rows.each do |row|\n    puts \"User #{row[:id]} is #{row[:name]}\"\n  end\nend"}],"params":[{"name":"table","types":["String"],"description":"The name of the table in the database to be\nread.","optional":false,"nullable":false},{"name":"columns","types":["Array<String, Symbol>"],"description":"The columns of table to be\nreturned for each row matching this request.","optional":false,"nullable":false},{"name":"keys","types":["Object","Array<Object>"],"description":"A single, or list of keys or key\nranges to match returned data to. Values should have exactly as many\nelements as there are columns in the primary key.","optional":true,"default":"nil","nullable":true},{"name":"index","types":["String"],"description":"The name of an index to use instead of the\ntable’s primary key when interpreting <code>id</code> and sorting result rows.\nOptional.","optional":true,"default":"nil","nullable":true},{"name":"limit","types":["Integer"],"description":"If greater than zero, no more than this number\nof rows will be returned. The default is no limit.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/results\">Google::Cloud::Spanner::Results</a>"],"description":"The results of the read\noperation."}]},{"id":"range-instance","type":"instance","name":"range","title":["Google","Cloud","Spanner","Snapshot#range"],"description":"<p>Creates a Cloud Spanner Range. This can be used in place of a Ruby\nRange when needing to exclude the beginning value.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/snapshot.rb#L235","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ndb = spanner.client \"my-instance\", \"my-database\"\n\ndb.snapshot do |snp|\n  key_range = db.range 1, 100\n  results = snp.read \"users\", [:id, :name], keys: key_range\n\n  results.rows.each do |row|\n    puts \"User #{row[:id]} is #{row[:name]}\"\n  end\nend"}],"params":[{"name":"beginning","types":["Object"],"description":"The object that defines the beginning of the\nrange.","optional":false,"nullable":false},{"name":"ending","types":["Object"],"description":"The object that defines the end of the range.","optional":false,"nullable":false},{"name":"exclude_begin","types":["Boolean"],"description":"Determines if the range excludes its\nbeginning value. Default is <code>false</code>.","optional":true,"default":"false","nullable":false},{"name":"exclude_end","types":["Boolean"],"description":"Determines if the range excludes its\nending value. Default is <code>false</code>.","optional":true,"default":"false","nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/range\">Google::Cloud::Spanner::Range</a>"],"description":"The new Range instance."}]}]}