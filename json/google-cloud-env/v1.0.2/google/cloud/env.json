{"id":"google/cloud/env","name":"Env","title":["Google","Cloud","Env"],"description":"<h1 id=\"google-cloud-hosting-environment\">Google Cloud hosting environment</h1>\n\n<p>This library provides access to information about the application’s\nhosting environment if it is running on Google Cloud Platform. You may\nuse this library to determine which Google Cloud product is hosting your\napplication (e.g. App Engine, Kubernetes Engine), information about the\nGoogle Cloud project hosting the application, information about the\nvirtual machine instance, authentication information, and so forth.</p>\n\n<h2 id=\"usage\">Usage</h2>\n\n<p>Obtain an instance of the environment info with:</p>\n\n<pre><code>require \"google/cloud/env\"\nenv = Google::Cloud.env\n</code></pre>\n\n<p>Then you can interrogate any fields using methods on the object.</p>\n\n<pre><code>if env.app_engine?\n  # App engine specific logic\nend\n</code></pre>\n\n<p>Any item that does not apply to the current environment will return nil.\nFor example:</p>\n\n<pre><code>unless env.app_engine?\n  service = env.app_engine_service_id  # =&gt; nil\nend\n</code></pre>","source":"google-cloud-env/lib/google/cloud/env.rb#L52","resources":[],"examples":[],"methods":[{"id":"initialize-constructor","type":"constructor","name":"initialize","title":["Google","Cloud","Env#initialize"],"description":"<p>Create a new instance of the environment information.\nMost client should not need to call this directly. Obtain a singleton\ninstance of the information from <code>Google::Cloud.env</code>. This constructor\nis provided for internal testing and allows mocking of the data.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L72","resources":[],"examples":[],"params":[{"name":"env","types":["Hash"],"description":"Mock environment variables.","optional":true,"default":"nil","nullable":true},{"name":"connection","types":["Faraday::Connection"],"description":"Faraday connection to use.","optional":true,"default":"nil","nullable":true},{"name":"metadata_cache","types":["Hash"],"description":"Mock cache.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/env\">Env</a>"],"description":"a new instance of Env"}]},{"id":"app_engine?-instance","type":"instance","name":"app_engine?","title":["Google","Cloud","Env#app_engine?"],"description":"<p>Determine whether the application is running on Google App Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L85","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"kubernetes_engine?-instance","type":"instance","name":"kubernetes_engine?","title":["Google","Cloud","Env#kubernetes_engine?"],"description":"<p>Determine whether the application is running on Google Kubernetes\nEngine (GKE).</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L95","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"cloud_shell?-instance","type":"instance","name":"cloud_shell?","title":["Google","Cloud","Env#cloud_shell?"],"description":"<p>Determine whether the application is running on Google Cloud Shell.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L105","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"compute_engine?-instance","type":"instance","name":"compute_engine?","title":["Google","Cloud","Env#compute_engine?"],"description":"<p>Determine whether the application is running on Google Compute Engine.</p>\n\n<p>Note that most other products (e.g. App Engine, Kubernetes Engine,\nCloud Shell) themselves use Compute Engine under the hood, so this\nmethod will return true for all the above products. If you want to\ndetermine whether the application is running on a “raw” Compute Engine\nVM without using a higher level hosting product, use\n<a data-custom-type=\"google/cloud/env\" data-method=\"raw_compute_engine?-instance\">Env#raw_compute_engine?</a>.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L121","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"raw_compute_engine?-instance","type":"instance","name":"raw_compute_engine?","title":["Google","Cloud","Env#raw_compute_engine?"],"description":"<p>Determine whether the application is running on “raw” Google Compute\nEngine without using a higher level hosting product such as App\nEngine or Kubernetes Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L132","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"project_id-instance","type":"instance","name":"project_id","title":["Google","Cloud","Env#project_id"],"description":"<p>Returns the unique string ID of the project hosting the application,\nor <code>nil</code> if the application is not running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L142","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"numeric_project_id-instance","type":"instance","name":"numeric_project_id","title":["Google","Cloud","Env#numeric_project_id"],"description":"<p>Returns the unique numeric ID of the project hosting the application,\nor <code>nil</code> if the application is not running on Google Cloud.</p>\n\n<p>Caveat: this method does not work and returns <code>nil</code> on CloudShell.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L155","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer","nil"],"description":""}]},{"id":"instance_name-instance","type":"instance","name":"instance_name","title":["Google","Cloud","Env#instance_name"],"description":"<p>Returns the name of the VM instance hosting the application, or <code>nil</code>\nif the application is not running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L172","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"instance_description-instance","type":"instance","name":"instance_description","title":["Google","Cloud","Env#instance_description"],"description":"<p>Returns the description field (which may be the empty string) of the\nVM instance hosting the application, or <code>nil</code> if the application is\nnot running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L183","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"instance_zone-instance","type":"instance","name":"instance_zone","title":["Google","Cloud","Env#instance_zone"],"description":"<p>Returns the zone (for example “<code>us-central1-c</code>”) in which the instance\nhosting the application lives. Returns <code>nil</code> if the application is\nnot running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L194","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"instance_machine_type-instance","type":"instance","name":"instance_machine_type","title":["Google","Cloud","Env#instance_machine_type"],"description":"<p>Returns the machine type of the VM instance hosting the application,\nor <code>nil</code> if the application is not running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L205","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"instance_tags-instance","type":"instance","name":"instance_tags","title":["Google","Cloud","Env#instance_tags"],"description":"<p>Returns an array (which may be empty) of all tags set on the VM\ninstance hosting the  application, or <code>nil</code> if the application is not\nrunning on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L217","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;String&gt;","nil"],"description":""}]},{"id":"instance_attribute_keys-instance","type":"instance","name":"instance_attribute_keys","title":["Google","Cloud","Env#instance_attribute_keys"],"description":"<p>Returns an array (which may be empty) of all attribute keys present\nfor the VM instance hosting the  application, or <code>nil</code> if the\napplication is not running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L229","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;String&gt;","nil"],"description":""}]},{"id":"instance_attribute-instance","type":"instance","name":"instance_attribute","title":["Google","Cloud","Env#instance_attribute"],"description":"<p>Returns the value of the given instance attribute for the VM instance\nhosting the application, or <code>nil</code> if the given key does not exist or\napplication is not running on Google Cloud.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L242","resources":[],"examples":[],"params":[{"name":"key","types":["String"],"description":"Attribute key to look up.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"app_engine_service_id-instance","type":"instance","name":"app_engine_service_id","title":["Google","Cloud","Env#app_engine_service_id"],"description":"<p>Returns the name of the running App Engine service, or <code>nil</code> if the\ncurrent code is not running in App Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L252","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"app_engine_service_version-instance","type":"instance","name":"app_engine_service_version","title":["Google","Cloud","Env#app_engine_service_version"],"description":"<p>Returns the version of the running App Engine service, or <code>nil</code> if the\ncurrent code is not running in App Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L262","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"app_engine_memory_mb-instance","type":"instance","name":"app_engine_memory_mb","title":["Google","Cloud","Env#app_engine_memory_mb"],"description":"<p>Returns the amount of memory reserved for the current App Engine\ninstance, or <code>nil</code> if the current code is not running in App Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L272","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer","nil"],"description":""}]},{"id":"kubernetes_engine_cluster_name-instance","type":"instance","name":"kubernetes_engine_cluster_name","title":["Google","Cloud","Env#kubernetes_engine_cluster_name"],"description":"<p>Returns the name of the Kubernetes Engine cluster hosting the\napplication, or <code>nil</code> if the current code is not running in\nKubernetes Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L284","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"kubernetes_engine_namespace_id-instance","type":"instance","name":"kubernetes_engine_namespace_id","title":["Google","Cloud","Env#kubernetes_engine_namespace_id"],"description":"<p>Returns the name of the Kubernetes Engine namespace hosting the\napplication, or <code>nil</code> if the current code is not running in\nKubernetes Engine.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L296","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"metadata?-instance","type":"instance","name":"metadata?","title":["Google","Cloud","Env#metadata?"],"description":"<p>Determine whether the Google Compute Engine Metadata Service is running.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L314","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"lookup_metadata-instance","type":"instance","name":"lookup_metadata","title":["Google","Cloud","Env#lookup_metadata"],"description":"<p>Retrieve info from the Google Compute Engine Metadata Service.\nReturns <code>nil</code> if the Metadata Service is not running or the given\ndata is not present.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L338","resources":[],"examples":[],"params":[{"name":"type","types":["String"],"description":"Type of metadata to look up. Currently supported\nvalues are “project” and “instance”.","optional":false,"nullable":false},{"name":"entry","types":["String"],"description":"Metadata entry path to look up.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["String","nil"],"description":""}]},{"id":"get-class","type":"class","name":"get","title":["Google","Cloud","Env.get"],"description":"<p>Returns the global instance of <a data-custom-type=\"google/cloud/env\">Google::Cloud::Env</a>.</p>","source":"google-cloud-env/lib/google/cloud/env.rb#L359","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/env\">Google::Cloud::Env</a>"],"description":""}]}]}