{"id":"google/cloud/logging/railtie","name":"Railtie","title":["Google","Cloud","Logging","Railtie"],"description":"<p>Railtie</p>\n\n<p>Adds the <a data-custom-type=\"google/cloud/logging/middleware\">Google::Cloud::Logging::Middleware</a> to Rack in a Rails\nenvironment. The middleware will set <code>env['rack.logger']</code> to a\n<a data-custom-type=\"google/cloud/logging/logger\">Google::Cloud::Logging::Logger</a> instance to be used by the Rails\napplication.</p>\n\n<p>The Middleware is only added when certain conditions are met. See\nuse_logging? for details.</p>\n\n<p>When loaded, the <a data-custom-type=\"google/cloud/logging/middleware\">Google::Cloud::Logging::Middleware</a> will be inserted\nbefore the <code>Rails::Rack::Logger Middleware</code>, which allows it to set the\n<code>env['rack.logger']</code> in place of Railsâ€™s default logger. The Railtie\nwill also initialize the logger with correct GCP <code>project_id</code>\nand <code>keyfile</code> if they are defined in the Rails <code>environment.rb</code> file as\nfollows:</p>\n\n<pre><code class=\"language-ruby\">config.google_cloud.logging.project_id = \"my-gcp-project\"\nconfig.google_cloud.logging.keyfile = \"/path/to/secret.json\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code class=\"language-ruby\">config.google_cloud.project_id = \"my-gcp-project\"\nconfig.google_cloud.keyfile = \"/path/to/secret.json\"\n</code></pre>\n\n<p>If omitted, project_id will be initialized with default environment\nvariables.</p>","source":"google-cloud-logging/lib/google/cloud/logging/rails.rb#L57","resources":[],"examples":[],"methods":[{"id":"use_logging?-class","type":"class","name":"use_logging?","title":["Google","Cloud","Logging","Railtie.use_logging?"],"description":"<p>Determine whether to use Stackdriver Logging or not.</p>\n\n<p>Returns <code>true</code> if Stackdriver Logging is enabled for this application.\nThat is, if all of the following are true:</p>\n\n<ul>\n  <li>A valid GCP <code>project_id</code> is available, either because the\napplication is hosted on Google Cloud or because it is set in the\nconfiguration.</li>\n  <li>The API is able to authenticate, again either because the\napplication is hosted on Google Cloud or because an appropriate\nkeyfile is provided in the configuration.</li>\n  <li>Either the Rails environment is set to <code>production</code> or the\n<code>config.google_cloud.use_logging</code> configuration is explicitly set to\n<code>true</code>.</li>\n</ul>","source":"google-cloud-logging/lib/google/cloud/logging/rails.rb#L111","resources":[],"examples":[],"params":[{"name":"config","types":["Rails::Railtie::Configuration"],"description":"The\n<code>Rails.application.config</code>","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Whether to use Stackdriver Logging"}]}]}