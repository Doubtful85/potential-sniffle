{"id":"google/cloud/bigquery/schema","name":"Schema","title":["Google","Cloud","Bigquery","Schema"],"description":"<h1 id=\"table-schema\">Table Schema</h1>\n\n<p>A builder for BigQuery table schemas, passed to block arguments to\n<a data-custom-type=\"google/cloud/bigquery/dataset\" data-method=\"create_table-instance\">Dataset#create_table</a> and <a data-custom-type=\"google/cloud/bigquery/table\" data-method=\"schema-instance\">Table#schema</a>. Supports nested and\nrepeated fields via a nested block.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L47","resources":[{"title":"Preparing Data for BigQuery","link":"https://cloud.google.com/bigquery/preparing-data-for-bigquery"}],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.create_table \"my_table\"\n\ntable.schema do |schema|\n  schema.string \"first_name\", mode: :required\n  schema.record \"cities_lived\", mode: :repeated do |cities_lived|\n    cities_lived.string \"place\", mode: :required\n    cities_lived.integer \"number_of_years\", mode: :required\n  end\nend"}],"methods":[{"id":"load-class","type":"class","name":"load","title":["Google","Cloud","Bigquery","Schema.load"],"description":"<p>Load a schema from a JSON file.</p>\n\n<p>The JSON schema file is the same as for the <a href=\"https://cloud.google.com/bigquery/docs/schemas#specifying_a_json_schema_file\"><code>bq</code>\nCLI</a>\nconsisting of an array of JSON objects containing the following:</p>\n<ul>\n  <li><code>name</code>: The column <a href=\"https://cloud.google.com/bigquery/docs/schemas#column_names\">name</a></li>\n  <li><code>type</code>: The column’s <a href=\"https://cloud.google.com/bigquery/docs/schemas#standard_sql_data_types\">data\ntype</a></li>\n  <li><code>description</code>: (Optional) The column’s <a href=\"https://cloud.google.com/bigquery/docs/schemas#column_descriptions\">description</a></li>\n  <li><code>mode</code>: (Optional) The column’s <a href=\"https://cloud.google.com/bigquery/docs/schemas#modes\">mode</a>\n(if unspecified, mode defaults to <code>NULLABLE</code>)</li>\n  <li><code>fields</code>: If <code>type</code> is <code>RECORD</code>, an array of objects defining\nchild fields with these properties</li>\n</ul>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L77","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nschema = Google::Cloud::Bigquery::Schema.load(\n  File.read(\"schema.json\")\n)"}],"params":[{"name":"source","types":["IO","String","Array<Hash>"],"description":"An <code>IO</code> containing the JSON\nschema, a <code>String</code> containing the JSON schema, or an <code>Array</code> of\n<code>Hash</code>es containing the schema details.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/schema\">Schema</a>"],"description":"A schema."}]},{"id":"dump-class","type":"class","name":"dump","title":["Google","Cloud","Bigquery","Schema.dump"],"description":"<p>Write a schema as JSON to a file.</p>\n\n<p>The JSON schema file is the same as for the <a href=\"https://cloud.google.com/bigquery/docs/schemas#specifying_a_json_schema_file\"><code>bq</code>\nCLI</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L105","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.table \"my_table\"\nschema = Google::Cloud::Bigquery::Schema.dump(\n  table.schema,\n  \"schema.json\"\n)"}],"params":[{"name":"schema","types":["Schema"],"description":"A <code>Google::Cloud::Bigquery::Schema</code>.","optional":false,"nullable":false},{"name":"destination","types":["IO","String"],"description":"An <code>IO</code> to which to write the\nschema, or a <code>String</code> containing the filename to write to.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/schema\">Schema</a>"],"description":"The schema so that commands are chainable."}]},{"id":"fields-instance","type":"instance","name":"fields","title":["Google","Cloud","Bigquery","Schema#fields"],"description":"<p>The fields of the table schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L127","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.table \"my_table\"\n\nschema = table.schema\n\nschema.fields.each do |field|\n  puts field.name\nend"}],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/bigquery/schema/field\">Field</a>&gt;"],"description":"An array of field objects."}]},{"id":"headers-instance","type":"instance","name":"headers","title":["Google","Cloud","Bigquery","Schema#headers"],"description":"<p>The names of the fields as symbols.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L153","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.create_table \"my_table\"\n\nschema = table.schema\n\nschema.headers.each do |header|\n  puts header\nend"}],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;Symbol&gt;"],"description":"An array of column names."}]},{"id":"field-instance","type":"instance","name":"field","title":["Google","Cloud","Bigquery","Schema#field"],"description":"<p>Retrieve a field by name.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L172","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.table \"my_table\"\n\nfield = table.schema.field \"name\"\nfield.required? #=> true"}],"params":[{"name":"yield","types":["block"],"description":"","optional":true,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/schema/field\">Field</a>"],"description":"A field object."}]},{"id":"empty?-instance","type":"instance","name":"empty?","title":["Google","Cloud","Bigquery","Schema#empty?"],"description":"<p>Whether the schema has no fields defined.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L184","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when there are no fields, <code>false</code> otherwise."}]},{"id":"load-instance","type":"instance","name":"load","title":["Google","Cloud","Bigquery","Schema#load"],"description":"<p>Load the schema from a JSON file.</p>\n\n<p>The JSON schema file is the same as for the <a href=\"https://cloud.google.com/bigquery/docs/schemas#specifying_a_json_schema_file\"><code>bq</code>\nCLI</a>\nconsisting of an array of JSON objects containing the following:</p>\n<ul>\n  <li><code>name</code>: The column <a href=\"https://cloud.google.com/bigquery/docs/schemas#column_names\">name</a></li>\n  <li><code>type</code>: The column’s <a href=\"https://cloud.google.com/bigquery/docs/schemas#standard_sql_data_types\">data\ntype</a></li>\n  <li><code>description</code>: (Optional) The column’s <a href=\"https://cloud.google.com/bigquery/docs/schemas#column_descriptions\">description</a></li>\n  <li><code>mode</code>: (Optional) The column’s <a href=\"https://cloud.google.com/bigquery/docs/schemas#modes\">mode</a>\n(if unspecified, mode defaults to <code>NULLABLE</code>)</li>\n  <li><code>fields</code>: If <code>type</code> is <code>RECORD</code>, an array of objects defining child\nfields with these properties</li>\n</ul>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L218","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.table \"my_table\" do |table|\n  table.schema.load File.read(\"path/to/schema.json\")\nend"}],"params":[{"name":"source","types":["IO","String","Array<Hash>"],"description":"An <code>IO</code> containing the JSON\nschema, a <code>String</code> containing the JSON schema, or an <code>Array</code> of\n<code>Hash</code>es containing the schema details.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/schema\">Schema</a>"],"description":"The schema so that commands are chainable."}]},{"id":"dump-instance","type":"instance","name":"dump","title":["Google","Cloud","Bigquery","Schema#dump"],"description":"<p>Write the schema as JSON to a file.</p>\n\n<p>The JSON schema file is the same as for the <a href=\"https://cloud.google.com/bigquery/docs/schemas#specifying_a_json_schema_file\"><code>bq</code>\nCLI</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L254","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.table \"my_table\"\ntable.schema.dump \"schema.json\""}],"params":[{"name":"destination","types":["IO","String"],"description":"An <code>IO</code> to which to write the schema,\nor a <code>String</code> containing the filename to write to.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/schema\">Schema</a>"],"description":"The schema so that commands are chainable."}]},{"id":"string-instance","type":"instance","name":"string","title":["Google","Cloud","Bigquery","Schema#string"],"description":"<p>Adds a string field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L277","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"integer-instance","type":"instance","name":"integer","title":["Google","Cloud","Bigquery","Schema#integer"],"description":"<p>Adds an integer field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L293","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"float-instance","type":"instance","name":"float","title":["Google","Cloud","Bigquery","Schema#float"],"description":"<p>Adds a floating-point number field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L309","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"numeric-instance","type":"instance","name":"numeric","title":["Google","Cloud","Bigquery","Schema#numeric"],"description":"<p>Adds a numeric number field to the schema. Numeric is a\nfixed-precision numeric type with 38 decimal digits, 9 that follow the\ndecimal point.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L327","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"boolean-instance","type":"instance","name":"boolean","title":["Google","Cloud","Bigquery","Schema#boolean"],"description":"<p>Adds a boolean field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L343","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"bytes-instance","type":"instance","name":"bytes","title":["Google","Cloud","Bigquery","Schema#bytes"],"description":"<p>Adds a bytes field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L359","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"timestamp-instance","type":"instance","name":"timestamp","title":["Google","Cloud","Bigquery","Schema#timestamp"],"description":"<p>Adds a timestamp field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L374","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"time-instance","type":"instance","name":"time","title":["Google","Cloud","Bigquery","Schema#time"],"description":"<p>Adds a time field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L390","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"datetime-instance","type":"instance","name":"datetime","title":["Google","Cloud","Bigquery","Schema#datetime"],"description":"<p>Adds a datetime field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L406","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"date-instance","type":"instance","name":"date","title":["Google","Cloud","Bigquery","Schema#date"],"description":"<p>Adds a date field to the schema.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L422","resources":[],"examples":[],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":":nullable","nullable":false}],"exceptions":[],"returns":[]},{"id":"record-instance","type":"instance","name":"record","title":["Google","Cloud","Bigquery","Schema#record"],"description":"<p>Adds a record field to the schema. A block must be passed describing\nthe nested fields of the record. For more information about nested\nand repeated records, see <a href=\"https://cloud.google.com/bigquery/preparing-data-for-bigquery\">Preparing Data for BigQuery\n</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/schema.rb#L459","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\ndataset = bigquery.dataset \"my_dataset\"\ntable = dataset.create_table \"my_table\"\n\ntable.schema do |schema|\n  schema.string \"first_name\", mode: :required\n  schema.record \"cities_lived\", mode: :repeated do |cities_lived|\n    cities_lived.string \"place\", mode: :required\n    cities_lived.integer \"number_of_years\", mode: :required\n  end\nend"}],"params":[{"name":"name","types":["String"],"description":"The field name. The name must contain only\nletters (a-z, A-Z), numbers (0-9), or underscores (_), and must\nstart with a letter or underscore. The maximum length is 128\ncharacters.","optional":false,"nullable":false},{"name":"description","types":["String"],"description":"A description of the field.","optional":true,"default":"nil","nullable":true},{"name":"mode","types":["Symbol"],"description":"The field’s mode. The possible values are\n<code>:nullable</code>, <code>:required</code>, and <code>:repeated</code>. The default value is\n<code>:nullable</code>.","optional":true,"default":"nil","nullable":true},{"name":"yield","types":["block"],"description":"a block for setting the nested record’s schema","optional":true,"nullable":false},{"name":"yield.field","types":["Field"],"description":"the object accepting the\nnested schema","optional":false,"nullable":false}],"exceptions":[{"type":"ArgumentError","description":""}],"returns":[]}]}