{"id":"google/cloud/bigquery/queryjob","name":"QueryJob","title":["Google","Cloud","Bigquery","QueryJob"],"description":"<h1 id=\"queryjob\">QueryJob</h1>\n\n<p>A <a data-custom-type=\"google/cloud/bigquery/job\">Job</a> subclass representing a query operation that may be performed\non a <a data-custom-type=\"google/cloud/bigquery/table\">Table</a>. A QueryJob instance is created when you call\n<a data-custom-type=\"google/cloud/bigquery/project\" data-method=\"query_job-instance\">Project#query_job</a>, <a data-custom-type=\"google/cloud/bigquery/dataset\" data-method=\"query_job-instance\">Dataset#query_job</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L51","resources":[{"title":"Querying Data","link":"https://cloud.google.com/bigquery/querying-data"},{"title":"Jobs API\nreference","link":"https://cloud.google.com/bigquery/docs/reference/v2/jobs"}],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\njob = bigquery.query_job \"SELECT COUNT(word) as count FROM \" \\\n                         \"`bigquery-public-data.samples.shakespeare`\"\n\njob.wait_until_done!\n\nif job.failed?\n  puts job.error\nelse\n  puts job.data.first\nend"}],"methods":[{"id":"batch?-instance","type":"instance","name":"batch?","title":["Google","Cloud","Bigquery","QueryJob#batch?"],"description":"<p>Checks if the priority for the query is <code>BATCH</code>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L58","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when the priority is <code>BATCH</code>, <code>false</code>\notherwise."}]},{"id":"interactive?-instance","type":"instance","name":"interactive?","title":["Google","Cloud","Bigquery","QueryJob#interactive?"],"description":"<p>Checks if the priority for the query is <code>INTERACTIVE</code>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L69","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when the priority is <code>INTERACTIVE</code>, <code>false</code>\notherwise."}]},{"id":"large_results?-instance","type":"instance","name":"large_results?","title":["Google","Cloud","Bigquery","QueryJob#large_results?"],"description":"<p>Checks if the the query job allows arbitrarily large results at a\nslight cost to performance.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L82","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when large results are allowed, <code>false</code>\notherwise."}]},{"id":"cache?-instance","type":"instance","name":"cache?","title":["Google","Cloud","Bigquery","QueryJob#cache?"],"description":"<p>Checks if the query job looks for an existing result in the query\ncache. For more information, see <a href=\"https://cloud.google.com/bigquery/querying-data#querycaching\">Query\nCaching</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L96","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when the query cache will be used, <code>false</code>\notherwise."}]},{"id":"flatten?-instance","type":"instance","name":"flatten?","title":["Google","Cloud","Bigquery","QueryJob#flatten?"],"description":"<p>Checks if the query job flattens nested and repeated fields in the\nquery results. The default is <code>true</code>. If the value is <code>false</code>,\n#large_results? should return <code>true</code>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L110","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when the job flattens results, <code>false</code>\notherwise."}]},{"id":"maximum_billing_tier-instance","type":"instance","name":"maximum_billing_tier","title":["Google","Cloud","Bigquery","QueryJob#maximum_billing_tier"],"description":"<p>Limits the billing tier for this job. Queries that have resource usage\nbeyond this tier will raise (without incurring a charge). If\nunspecified, this will be set to your project default. For more\ninformation, see <a href=\"https://cloud.google.com/bigquery/pricing#high-compute\">High-Compute\nqueries</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L126","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer","nil"],"description":"The tier number, or <code>nil</code> for the project\ndefault."}]},{"id":"maximum_bytes_billed-instance","type":"instance","name":"maximum_bytes_billed","title":["Google","Cloud","Bigquery","QueryJob#maximum_bytes_billed"],"description":"<p>Limits the bytes billed for this job. Queries that will have bytes\nbilled beyond this limit will raise (without incurring a charge). If\n<code>nil</code>, this will be set to your project default.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L138","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer","nil"],"description":"The number of bytes, or <code>nil</code> for the project\ndefault."}]},{"id":"cache_hit?-instance","type":"instance","name":"cache_hit?","title":["Google","Cloud","Bigquery","QueryJob#cache_hit?"],"description":"<p>Checks if the query results are from the query cache.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L150","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when the job statistics indicate a cache hit,\n<code>false</code> otherwise."}]},{"id":"bytes_processed-instance","type":"instance","name":"bytes_processed","title":["Google","Cloud","Bigquery","QueryJob#bytes_processed"],"description":"<p>The number of bytes processed by the query.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L160","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer","nil"],"description":"Total bytes processed for the job."}]},{"id":"query_plan-instance","type":"instance","name":"query_plan","title":["Google","Cloud","Bigquery","QueryJob#query_plan"],"description":"<p>Describes the execution plan for the query.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L191","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nsql = \"SELECT word FROM `bigquery-public-data.samples.shakespeare`\"\njob = bigquery.query_job sql\n\njob.wait_until_done!\n\nstages = job.query_plan\nstages.each do |stage|\n  puts stage.name\n  stage.steps.each do |step|\n    puts step.kind\n    puts step.substeps.inspect\n  end\nend"}],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/bigquery/queryjob/stage\">Google::Cloud::Bigquery::QueryJob::Stage</a>&gt;","nil"],"description":"An\narray containing the stages of the execution plan."}]},{"id":"statement_type-instance","type":"instance","name":"statement_type","title":["Google","Cloud","Bigquery","QueryJob#statement_type"],"description":"<p>The type of query statement, if valid. Possible values (new values\nmight be added in the future):</p>\n\n<ul>\n  <li>“SELECT”: <code>SELECT</code> query.</li>\n  <li>“INSERT”: <code>INSERT</code> query; see https://cloud.google.com/bigquery/docs/reference/standard-sql/data-manipulation-language</li>\n  <li>“UPDATE”: <code>UPDATE</code> query; see https://cloud.google.com/bigquery/docs/reference/standard-sql/data-manipulation-language</li>\n  <li>“DELETE”: <code>DELETE</code> query; see https://cloud.google.com/bigquery/docs/reference/standard-sql/data-manipulation-language</li>\n  <li>“CREATE_TABLE”: <code>CREATE [OR REPLACE] TABLE</code> without <code>AS SELECT</code>.</li>\n  <li>“CREATE_TABLE_AS_SELECT”: <code>CREATE [OR REPLACE] TABLE ... AS SELECT</code>.</li>\n  <li>“DROP_TABLE”: <code>DROP TABLE</code> query.</li>\n  <li>“CREATE_VIEW”: <code>CREATE [OR REPLACE] VIEW ... AS SELECT ...</code>.</li>\n  <li>“DROP_VIEW”: <code>DROP VIEW</code> query.</li>\n</ul>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L215","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":"The type of query statement."}]},{"id":"ddl_operation_performed-instance","type":"instance","name":"ddl_operation_performed","title":["Google","Cloud","Bigquery","QueryJob#ddl_operation_performed"],"description":"<p>The DDL operation performed, possibly dependent on the pre-existence\nof the DDL target. (See <a data-custom-type=\"google/cloud/bigquery/queryjob\" data-method=\"ddl_target_table-instance\">#ddl_target_table</a>.) Possible values (new\nvalues might be added in the future):</p>\n\n<ul>\n  <li>“CREATE”: The query created the DDL target.</li>\n  <li>“SKIP”: No-op. Example cases: the query is\n<code>CREATE TABLE IF NOT EXISTS</code> while the table already exists, or the\nquery is <code>DROP TABLE IF EXISTS</code> while the table does not exist.</li>\n  <li>“REPLACE”: The query replaced the DDL target. Example case: the\nquery is <code>CREATE OR REPLACE TABLE</code>, and the table already exists.</li>\n  <li>“DROP”: The query deleted the DDL target.</li>\n</ul>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L235","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":"The DDL operation performed."}]},{"id":"ddl_target_table-instance","type":"instance","name":"ddl_target_table","title":["Google","Cloud","Bigquery","QueryJob#ddl_target_table"],"description":"<p>The DDL target table, in reference state. (See <a data-custom-type=\"google/cloud/bigquery/table\" data-method=\"reference?-instance\">Table#reference?</a>.)\nPresent only for <code>CREATE/DROP TABLE/VIEW</code> queries. (See\n<a data-custom-type=\"google/cloud/bigquery/queryjob\" data-method=\"statement_type-instance\">#statement_type</a>.)</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L248","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/table\">Google::Cloud::Bigquery::Table</a>","nil"],"description":"The DDL target table, in\nreference state."}]},{"id":"destination-instance","type":"instance","name":"destination","title":["Google","Cloud","Bigquery","QueryJob#destination"],"description":"<p>The table in which the query results are stored.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L261","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/table\">Table</a>"],"description":"A table instance."}]},{"id":"legacy_sql?-instance","type":"instance","name":"legacy_sql?","title":["Google","Cloud","Bigquery","QueryJob#legacy_sql?"],"description":"<p>Checks if the query job is using legacy sql.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L274","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when legacy sql is used, <code>false</code> otherwise."}]},{"id":"standard_sql?-instance","type":"instance","name":"standard_sql?","title":["Google","Cloud","Bigquery","QueryJob#standard_sql?"],"description":"<p>Checks if the query job is using standard sql.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L285","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when standard sql is used, <code>false</code> otherwise."}]},{"id":"udfs-instance","type":"instance","name":"udfs","title":["Google","Cloud","Bigquery","QueryJob#udfs"],"description":"<p>The user-defined function resources used in the query. May be either a\ncode resource to load from a Google Cloud Storage URI\n(<code>gs://bucket/path</code>), or an inline resource that contains code for a\nuser-defined function (UDF). Providing an inline code resource is\nequivalent to providing a URI for a file containing the same code. See\n<a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions\">User-Defined Functions</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L300","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;String&gt;"],"description":"An array containing Google Cloud Storage URIs\nand/or inline source code."}]},{"id":"encryption-instance","type":"instance","name":"encryption","title":["Google","Cloud","Bigquery","QueryJob#encryption"],"description":"<p>The encryption configuration of the destination table.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L315","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Google::Cloud::BigQuery::EncryptionConfiguration"],"description":"Custom\nencryption configuration (e.g., Cloud KMS keys)."}]},{"id":"time_partitioning?-instance","type":"instance","name":"time_partitioning?","title":["Google","Cloud","Bigquery","QueryJob#time_partitioning?"],"description":"<p>Checks if the destination table will be time-partitioned. See\n<a href=\"https://cloud.google.com/bigquery/docs/partitioned-tables\">Partitioned Tables</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L330","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean","nil"],"description":"<code>true</code> when the table will be time-partitioned,\nor <code>false</code> otherwise."}]},{"id":"time_partitioning_type-instance","type":"instance","name":"time_partitioning_type","title":["Google","Cloud","Bigquery","QueryJob#time_partitioning_type"],"description":"<p>The period for which the destination table will be partitioned, if\nany. See <a href=\"https://cloud.google.com/bigquery/docs/partitioned-tables\">Partitioned Tables</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L343","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":"The partition type. Currently the only supported\nvalue is “DAY”, or <code>nil</code> if not present."}]},{"id":"time_partitioning_field-instance","type":"instance","name":"time_partitioning_field","title":["Google","Cloud","Bigquery","QueryJob#time_partitioning_field"],"description":"<p>The field on which the destination table will be partitioned, if any.\nIf not set, the destination table will be partitioned by pseudo column\n<code>_PARTITIONTIME</code>; if set, the table will be partitioned by this field.\nSee <a href=\"https://cloud.google.com/bigquery/docs/partitioned-tables\">Partitioned Tables</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L359","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String","nil"],"description":"The partition field, if a field was configured.\n<code>nil</code> if not partitioned or not set (partitioned by pseudo column\n‘_PARTITIONTIME’)."}]},{"id":"time_partitioning_expiration-instance","type":"instance","name":"time_partitioning_expiration","title":["Google","Cloud","Bigquery","QueryJob#time_partitioning_expiration"],"description":"<p>The expiration for the destination table partitions, if any, in\nseconds. See <a href=\"https://cloud.google.com/bigquery/docs/partitioned-tables\">Partitioned\nTables</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L374","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer","nil"],"description":"The expiration time, in seconds, for data in\npartitions, or <code>nil</code> if not present."}]},{"id":"time_partitioning_require_filter?-instance","type":"instance","name":"time_partitioning_require_filter?","title":["Google","Cloud","Bigquery","QueryJob#time_partitioning_require_filter?"],"description":"<p>If set to true, queries over the destination table will require a\npartition filter that can be used for partition elimination to be\nspecified. See <a href=\"https://cloud.google.com/bigquery/docs/partitioned-tables\">Partitioned\nTables</a>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L390","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"<code>true</code> when a partition filter will be required,\nor <code>false</code> otherwise."}]},{"id":"wait_until_done!-instance","type":"instance","name":"wait_until_done!","title":["Google","Cloud","Bigquery","QueryJob#wait_until_done!"],"description":"<p>Refreshes the job until the job is <code>DONE</code>.\nThe delay between refreshes will incrementally increase.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L411","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nsql = \"SELECT word FROM `bigquery-public-data.samples.shakespeare`\"\njob = bigquery.query_job sql\n\njob.wait_until_done!\njob.done? #=> true"}],"params":[],"exceptions":[],"returns":[]},{"id":"data-instance","type":"instance","name":"data","title":["Google","Cloud","Bigquery","QueryJob#data"],"description":"<p>Retrieves the query results for the job.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/query_job.rb#L452","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nsql = \"SELECT word FROM `bigquery-public-data.samples.shakespeare`\"\njob = bigquery.query_job sql\n\njob.wait_until_done!\ndata = job.data\ndata.each do |row|\n  puts row[:word]\nend\ndata = data.next if data.next?"}],"params":[{"name":"token","types":["String"],"description":"Page token, returned by a previous call,\nidentifying the result set.","optional":true,"default":"nil","nullable":true},{"name":"max","types":["Integer"],"description":"Maximum number of results to return.","optional":true,"default":"nil","nullable":true},{"name":"start","types":["Integer"],"description":"Zero-based index of the starting row to read.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/data\">Google::Cloud::Bigquery::Data</a>"],"description":"An object providing access to\ndata read from the destination table for the job."}]}]}