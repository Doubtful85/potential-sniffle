{"id":"google/cloud/bigquery/external/bigtablesource","name":"BigtableSource","title":["Google","Cloud","Bigquery","External","BigtableSource"],"description":"<h1 id=\"bigtablesource\">BigtableSource</h1>\n\n<p><a data-custom-type=\"google/cloud/bigquery/external/bigtablesource\">External::BigtableSource</a> is a subclass of <a data-custom-type=\"google/cloud/bigquery/external/datasource\">External::DataSource</a> and\nrepresents a Bigtable external data source that can be queried from\ndirectly, even though the data is not stored in BigQuery. Instead of\nloading or streaming the data, this object references the external\ndata source.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/external.rb#L1261","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nbigtable_url = \"https://googleapis.com/bigtable/projects/...\"\nbigtable_table = bigquery.external bigtable_url do |bt|\n  bt.rowkey_as_string = true\n  bt.add_family \"user\" do |u|\n    u.add_string \"name\"\n    u.add_string \"email\"\n    u.add_integer \"age\"\n    u.add_boolean \"active\"\n  end\nend\n\ndata = bigquery.query \"SELECT * FROM my_ext_table\",\n                      external: { my_ext_table: bigtable_table }\n\ndata.each do |row|\n  puts row[:name]\nend"}],"methods":[{"id":"families-instance","type":"instance","name":"families","title":["Google","Cloud","Bigquery","External","BigtableSource#families"],"description":"<p>List of column families to expose in the table schema along with\ntheir types. This list restricts the column families that can be\nreferenced in queries and specifies their value types. You can use\nthis list to do type conversions - see\n<a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\" data-method=\"type-instance\">BigtableSource::ColumnFamily#type</a> for more details. If you leave\nthis list empty, all column families are present in the table schema\nand their values are read as <code>BYTES</code>. During a query only the column\nfamilies referenced in that query are read from Bigtable.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/external.rb#L1301","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nbigtable_url = \"https://googleapis.com/bigtable/projects/...\"\nbigtable_table = bigquery.external bigtable_url do |bt|\n  bt.rowkey_as_string = true\n  bt.add_family \"user\" do |u|\n    u.add_string \"name\"\n    u.add_string \"email\"\n    u.add_integer \"age\"\n    u.add_boolean \"active\"\n  end\nend\n\nbigtable_table.families.count #=> 1"}],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\">BigtableSource::ColumnFamily</a>&gt;"],"description":""}]},{"id":"add_family-instance","type":"instance","name":"add_family","title":["Google","Cloud","Bigquery","External","BigtableSource#add_family"],"description":"<p>Add a column family to expose in the table schema along with its\ntypes. Columns belonging to the column family may also be exposed.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/external.rb#L1340","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nbigtable_url = \"https://googleapis.com/bigtable/projects/...\"\nbigtable_table = bigquery.external bigtable_url do |bt|\n  bt.rowkey_as_string = true\n  bt.add_family \"user\" do |u|\n    u.add_string \"name\"\n    u.add_string \"email\"\n    u.add_integer \"age\"\n    u.add_boolean \"active\"\n  end\nend"}],"params":[{"name":"family_id","types":["String"],"description":"Identifier of the column family. See\n<a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\" data-method=\"family_id-instance\">BigtableSource::ColumnFamily#family_id</a>.","optional":false,"nullable":false},{"name":"encoding","types":["String"],"description":"The encoding of the values when the type is\nnot <code>STRING</code>. See <a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\" data-method=\"encoding-instance\">BigtableSource::ColumnFamily#encoding</a>.","optional":true,"default":"nil","nullable":true},{"name":"latest","types":["Boolean"],"description":"Whether only the latest version of value are\nexposed for all columns in this column family. See\n<a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\" data-method=\"latest-instance\">BigtableSource::ColumnFamily#latest</a>.","optional":true,"default":"nil","nullable":true},{"name":"type","types":["String"],"description":"The type to convert the value in cells of this\ncolumn. See <a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\" data-method=\"type-instance\">BigtableSource::ColumnFamily#type</a>.","optional":true,"default":"nil","nullable":true},{"name":"yield","types":["block"],"description":"a block for setting the family","optional":true,"nullable":false},{"name":"yield.family","types":["BigtableSource::ColumnFamily"],"description":"the family object","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/bigquery/external/bigtablesource/columnfamily\">BigtableSource::ColumnFamily</a>"],"description":""}]},{"id":"rowkey_as_string-instance","type":"instance","name":"rowkey_as_string","title":["Google","Cloud","Bigquery","External","BigtableSource#rowkey_as_string"],"description":"<p>Whether the rowkey column families will be read and converted to\nstring. Otherwise they are read with <code>BYTES</code> type values and users\nneed to manually cast them with <code>CAST</code> if necessary. The default\nvalue is <code>false</code>.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/external.rb#L1372","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nbigtable_url = \"https://googleapis.com/bigtable/projects/...\"\nbigtable_table = bigquery.external bigtable_url do |bt|\n  bt.rowkey_as_string = true\nend\n\nbigtable_table.rowkey_as_string #=> true"}],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"rowkey_as_string=-instance","type":"instance","name":"rowkey_as_string=","title":["Google","Cloud","Bigquery","External","BigtableSource#rowkey_as_string="],"description":"<p>Set the number of rows at the top of a sheet that BigQuery will skip\nwhen reading the data.</p>","source":"google-cloud-bigquery/lib/google/cloud/bigquery/external.rb#L1394","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/bigquery\"\n\nbigquery = Google::Cloud::Bigquery.new\n\nbigtable_url = \"https://googleapis.com/bigtable/projects/...\"\nbigtable_table = bigquery.external bigtable_url do |bt|\n  bt.rowkey_as_string = true\nend\n\nbigtable_table.rowkey_as_string #=> true"}],"params":[{"name":"row_rowkey","types":["Boolean"],"description":"New rowkey_as_string value","optional":false,"nullable":false}],"exceptions":[],"returns":[]}]}